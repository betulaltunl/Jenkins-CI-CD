<html>
<head>
<title>doc.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #c77dbb; font-style: italic;}
.s4 { color: #6aab73;}
.s5 { color: #56a8f5;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
doc.md</font>
</center></td></tr></table>
<pre><span class="s0"># </span><span class="s2">BÖLÜM-1</span>

<span class="s0">## </span><span class="s2">İÇİNDEKİLER</span><span class="s1">:</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">1. Jenkins Kurulumu</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">2. Java Kurulumu</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">3. Jenkins Servisini Yönetme</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">4. Nginx Kurulumu ve Yapılandırması </span><span class="s1">(</span><span class="s2">Reverse Proxy</span><span class="s1">)**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">5. Self-Signed Sertifika Oluşturma </span><span class="s1">(</span><span class="s2">HTTPS için</span><span class="s1">)**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">6. Nginx Yapılandırmasını HTTPS için Güncelleme</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">7. Jenkins'e Erişme</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">8. Ek Bilgiler; Plugin, Folder, Artifact, Workspace</span><span class="s1">**</span>

<span class="s0">---</span>


<span class="s1">**</span><span class="s2">1. Jenkins Kurulumu</span><span class="s1">**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Jenkins Hakkında Bilgi </span><span class="s1">(</span><span class="s2">Opsiyonel</span><span class="s1">):**</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">apt-cache show jenkins</span>
<span class="s0">```</span>

<span class="s2">Bu komut, Jenkins paketi hakkında bilgi verir </span><span class="s1">(</span><span class="s2">versiyon, bağımlılıklar, açıklama vb.</span><span class="s1">)</span><span class="s2">. Kuruluma başlamadan önce Jenkins hakkında bilgi edinmek için faydalıdır.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Jenkins Repository Ekleme</span><span class="s1">:**</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">sudo wget -O /usr/share/keyrings/jenkins-keyring.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key</span>
<span class="s0">```</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">echo &quot;deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian-stable binary/&quot; | sudo tee /etc/apt/sources.list.d/jenkins.list &gt; /dev/null</span>
<span class="s0">```</span>

<span class="s2">Bu adımlar, Jenkins'in resmi paket deposunu sisteminize ekler. Bu sayede, Jenkins'i apt paket yöneticisi ile kurabileceksiniz.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Paket Listesini Güncelleme</span><span class="s1">:**</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">sudo apt-get update</span>
<span class="s0">```</span>

<span class="s2">Bu komut, sistemdeki paket listesini günceller. Yeni eklenen Jenkins deposunun da listeye dahil olmasını sağlar.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Jenkins Kurulumu</span><span class="s1">:**</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">sudo apt-get install jenkins</span>
<span class="s0">```</span>

<span class="s2">Bu komut, Jenkins'i kurar. Kurulum sırasında bağımlılıklar da otomatik olarak kurulacaktır.</span>

<span class="s1">**</span><span class="s2">2. Java Kurulumu</span><span class="s1">**</span>

<span class="s2">Jenkins Java ile çalıştığı için, sisteminizde Java'nın kurulu olması gerekir.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Paket Listesini Güncelleme </span><span class="s1">(</span><span class="s2">Tekrar</span><span class="s1">):**</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">sudo apt update</span>
<span class="s0">```</span>

<span class="s2">Paket listesini tekrar güncellemek her zaman iyi bir uygulamadır.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Java Kurulumu </span><span class="s1">(</span><span class="s2">OpenJDK 17</span><span class="s1">):**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo apt install fontconfig openjdk-17-jre</span>
    <span class="s0">```</span>
    
    <span class="s2">Bu komut, OpenJDK 17'nin Java Runtime Environment </span><span class="s1">(</span><span class="s2">JRE</span><span class="s1">) </span><span class="s2">sürümünü kurar.  fontconfig, Java uygulamalarının yazı tiplerini doğru şekilde işlemesi için gereklidir. Farklı bir Java sürümü kullanmak isterseniz, openjdk-17-jre yerine istediğiniz sürümü belirtebilirsiniz </span><span class="s1">(</span><span class="s2">örneğin, openjdk-11-jre</span><span class="s1">)</span><span class="s2">.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Java Versiyonunu Kontrol Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">java -version</span>
    <span class="s0">```</span>
    
     <span class="s2">Doğru sürümün kurulu olduğunu doğrulamak için önemlidir.</span>
    

<span class="s1">**</span><span class="s2">3. Jenkins Servisini Yönetme</span><span class="s1">**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Jenkins'i Başlatma</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo systemctl start jenkins</span>
    <span class="s0">```</span>
    
    <span class="s2">Jenkins servisini başlatır.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Jenkins Servis Durumunu Kontrol Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo systemctl status jenkins</span>
    <span class="s0">```</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Jenkins'in Dinlediği Portu Kontrol Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo netstat -ntlp | grep 8080</span>
    <span class="s0">```</span>
    
    <span class="s2">Jenkins genellikle 8080 portunda çalışır. Bu komut, 8080 portunun Jenkins tarafından kullanıldığını doğrular. Eğer Jenkins farklı bir portta çalışıyorsa, 8080 yerine o portu kullanın.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">İlk Yönetici Parolasını Alma</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo cat /var/lib/jenkins/secrets/initialAdminPassword</span>
    <span class="s0">```</span>
    
    <span class="s2">Bu komut, Jenkins kurulumundan sonra oluşturulan ilk yönetici parolasını gösterir. Bu parolayı, Jenkins'e ilk kez giriş yaparken kullanacaksınız.</span>
    

<span class="s1">**</span><span class="s2">4. Nginx Kurulumu ve Yapılandırması </span><span class="s1">(</span><span class="s2">Reverse Proxy</span><span class="s1">)**</span>

<span class="s2">Nginx'i bir reverse proxy olarak kullanmak, Jenkins'e güvenli ve kolay bir şekilde erişmenizi sağlar.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Paket Listesini Güncelleme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo apt update</span>
    <span class="s0">```</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx Kurulumu</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo apt install nginx</span>
    <span class="s0">```</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx Servis Durumunu Kontrol Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo systemctl status nginx</span>
    <span class="s0">```</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Firewall Ayarları </span><span class="s1">(</span><span class="s2">UFW</span><span class="s1">):**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo ufw allow 'Nginx HTTP'</span>
    <span class="s4">sudo ufw allow 'Nginx HTTPS'  #HTTPS için de izin veriyoruz (ileride kullanacağız)</span>
    <span class="s4">sudo ufw enable # ufw'yi etkinleştir</span>
    <span class="s0">```</span>
    
    <span class="s2">Eğer UFW  kullanıyorsanız, Nginx'in trafiğe izin vermesi için bu komutları çalıştırmanız gerekir.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx Yapılandırma Dosyası Oluşturma</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo nano /etc/nginx/sites-available/jenkins</span>
    <span class="s0">```</span>
    
    <span class="s2">Bu komut, jenkins adında yeni bir Nginx yapılandırma dosyası açar. İçeriği aşağıdaki gibi olmalıdır </span><span class="s1">(</span><span class="s2">alan adınızı/IP adresinizi ve port numarasını kendi değerlerinizle değiştirin</span><span class="s1">):</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">server {</span>
        <span class="s4">listen 80;</span>
        <span class="s4">server_name example.com; # Alan adınız veya sunucu IP'niz</span>
    
        <span class="s4">location / {</span>
            <span class="s4">proxy_pass http://localhost:8080; # Jenkins'in çalıştığı adres ve port</span>
            <span class="s4">proxy_set_header X-Real-IP $remote_addr;</span>
            <span class="s4">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
            <span class="s4">proxy_set_header Host $http_host;</span>
            <span class="s4">proxy_set_header X-Forwarded-Proto $scheme; #HTTPS için önemli</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
    <span class="s0">```</span>
    
    <span class="s1">**</span><span class="s2">Açıklama</span><span class="s1">:**</span>
    
    <span class="s0">- </span><span class="s2">“listen 80;” Nginx'in 80 portunu dinlemesini sağlar </span><span class="s1">(</span><span class="s2">HTTP</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s2">“server_name example.com;” Alan adınızı veya sunucu IP adresinizi buraya yazın.</span>
    <span class="s0">- </span><span class="s2">“proxy_pass </span><span class="s5">http://localhost:8080</span><span class="s2">;” Tüm istekleri localhost</span><span class="s1">:</span><span class="s2">8080 adresine </span><span class="s1">(</span><span class="s2">Jenkins'in çalıştığı adres ve port</span><span class="s1">) </span><span class="s2">yönlendirir.</span>
    <span class="s0">- </span><span class="s2">“proxy_set_header ...” Bu satırlar, istemcinin gerçek IP adresini ve diğer bilgileri Jenkins'e iletir. Reverse proxy'nin doğru çalışması için önemlidir.</span>
    <span class="s0">- </span><span class="s2">“X-Forwarded-Proto </span><span class="s1">$</span><span class="s2">scheme” HTTPS kullanıyorsanız, Jenkins'e isteğin HTTPS üzerinden geldiğini bildirir.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx Yapılandırma Dosyasını Etkinleştirme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo ln -s /etc/nginx/sites-available/jenkins /etc/nginx/sites-enabled/</span>
    <span class="s0">```</span>
    
    <span class="s2">Bu komut, jenkins yapılandırma dosyasını sites-enabled dizinine sembolik link ile ekleyerek etkinleştirir.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Varsayılan Nginx Yapılandırmasını Devre Dışı Bırakma </span><span class="s1">(</span><span class="s2">Opsiyonel</span><span class="s1">):**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo rm /etc/nginx/sites-enabled/default</span>
    <span class="s0">```</span>
    
    <span class="s2">Eğer sadece Jenkins'e erişmek istiyorsanız, varsayılan Nginx yapılandırmasını devre dışı bırakabilirsiniz. Ancak, bu sadece tek bir web sitesi barındırıyorsanız geçerlidir. Birden fazla web sitesi barındırıyorsanız, varsayılan yapılandırmayı değiştirmek daha uygun olabilir.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx Yapılandırmasını Test Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo nginx -t</span>
    <span class="s0">```</span>
    
    <span class="s2">Bu komut, Nginx yapılandırma dosyalarınızı sözdizimsel olarak test eder. Hata varsa, hatanın nerede olduğunu gösterir.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx ve Jenkins'i Yeniden Başlatma</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo systemctl restart nginx</span>
    <span class="s4">sudo systemctl restart jenkins</span>
    <span class="s0">```</span>
    
    <span class="s2">Yapılandırma değişikliklerinin etkili olması için Nginx ve Jenkins'i yeniden başlatmanız gerekir.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Servis Durumlarını Kontrol Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo systemctl status nginx</span>
    <span class="s4">sudo systemctl status jenkins</span>
    <span class="s0">```</span>
    

<span class="s1">**</span><span class="s2">5. Self-Signed Sertifika Oluşturma </span><span class="s1">(</span><span class="s2">HTTPS için</span><span class="s1">)**</span>

<span class="s2">Bu adım, Jenkins'e HTTPS üzerinden erişmek için gereklidir. Self-signed sertifika, ücretsiz bir seçenektir. Let's Encrypt gibi bir sertifika otoriteside kullanılabilir.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Self-Signed Sertifika Oluşturma</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt</span>
    <span class="s0">```</span>
    
    <span class="s2">Bu komut, 365 gün geçerli bir self-signed sertifika ve özel anahtar oluşturur. Oluşturma sırasında bazı bilgiler istenecektir </span><span class="s1">(</span><span class="s2">ülke, şehir, organizasyon adı vb.</span><span class="s1">)</span><span class="s2">.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Sertifika ve Anahtar Dosyalarının Konumunu Kontrol Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">ls /etc/ssl/certs</span>
    <span class="s4">ls /etc/ssl/private</span>
    <span class="s0">```</span>
    

<span class="s1">**</span><span class="s2">6. Nginx Yapılandırmasını HTTPS için Güncelleme</span><span class="s1">**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx Yapılandırma Dosyasını Düzenleme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo nano /etc/nginx/sites-available/jenkins</span>
    <span class="s0">```</span>
    
    <span class="s2">Dosyanın içeriğini aşağıdaki gibi güncelleyin</span><span class="s1">:</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">server {</span>
        <span class="s4">listen 80;</span>
        <span class="s4">server_name example.com; # Alan adınız veya sunucu IP'niz</span>
        <span class="s4">return 301 https://$host$request_uri; # HTTP'den HTTPS'ye yönlendirme</span>
    <span class="s4">}</span>
    
    <span class="s4">server {</span>
        <span class="s4">listen 443 ssl;</span>
        <span class="s4">server_name example.com; # Alan adınız veya sunucu IP'niz</span>
    
        <span class="s4">ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;</span>
        <span class="s4">ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;</span>
    
        <span class="s4">location / {</span>
            <span class="s4">proxy_pass http://localhost:8080; # Jenkins'in çalıştığı adres ve port</span>
            <span class="s4">proxy_set_header X-Real-IP $remote_addr;</span>
            <span class="s4">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span>
            <span class="s4">proxy_set_header Host $http_host;</span>
            <span class="s4">proxy_set_header X-Forwarded-Proto https;</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
    <span class="s0">```</span>
    
    <span class="s1">**</span><span class="s2">Açıklama</span><span class="s1">:**</span>
    
    <span class="s0">- </span><span class="s2">İki server bloğu var</span><span class="s1">: </span><span class="s2">Biri HTTP </span><span class="s1">(</span><span class="s2">80 portu</span><span class="s1">) </span><span class="s2">için, diğeri HTTPS </span><span class="s1">(</span><span class="s2">443 portu</span><span class="s1">) </span><span class="s2">için.</span>
    <span class="s0">- </span><span class="s2">HTTP bloğu, tüm istekleri otomatik olarak HTTPS'ye yönlendirir </span><span class="s1">(</span><span class="s2">return 301 https</span><span class="s1">:</span><span class="s2">//</span><span class="s1">$</span><span class="s2">host</span><span class="s1">$</span><span class="s2">request_uri;</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s2">HTTPS bloğu, SSL'i etkinleştirir </span><span class="s1">(</span><span class="s2">listen 443 ssl;</span><span class="s1">) </span><span class="s2">ve sertifika ve özel anahtar dosyalarının konumlarını belirtir.</span>
    <span class="s0">- </span><span class="s2">X-Forwarded-Proto https;</span><span class="s1">: </span><span class="s2">Jenkins'e isteğin HTTPS üzerinden geldiğini bildirir.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx Yapılandırmasını Test Etme</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo nginx -t</span>
    <span class="s0">```</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Nginx'i Yeniden Başlatma</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo systemctl restart nginx</span>
    <span class="s0">```</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Firewall'da HTTPS</span><span class="s1">'</span><span class="s2">e İzin Verme </span><span class="s1">(</span><span class="s2">Eğer UFW Kullanıyorsanız</span><span class="s1">):**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo ufw allow 'Nginx Full' #Hem HTTP hem de HTTPS'e izin verir.</span>
    <span class="s0">```</span>
    

<span class="s1">**</span><span class="s2">7. Jenkins'e Erişme</span><span class="s1">**</span>

<span class="s2">Tarayıcınızda </span><span class="s5">https://example.com</span><span class="s2"> </span><span class="s1">(</span><span class="s2">veya sunucu IP adresiniz</span><span class="s1">) </span><span class="s2">adresine giderek Jenkins'e erişebilirsiniz. Tarayıcınız, self-signed sertifika nedeniyle bir uyarı gösterebilir. Bu uyarıyı kabul ederek devam edebilirsiniz.</span>


<span class="s1">**</span><span class="s2">8. JENKINS</span><span class="s1">**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">PLUGIN</span><span class="s1">**</span>
    
    <span class="s2">Plugin'ler, Jenkins ortamının işlevselliğini kuruluşların veya kullanıcıların özel ihtiyaçlarına göre geliştirmesini sağlayan araçlardır. Bir Jenkins denetleyicisine kurulabilen ve çeşitli yapı araçlarını, bulut sağlayıcılarını, analiz araçlarını ve daha birçok sistemi entegre edebilen binden fazla farklı plugin bulunmaktadır.</span>
    
    <span class="s2">Plugin'ler, bağımlılıklarıyla birlikte Güncelleme Merkezi'nden otomatik olarak indirilebilir. Güncelleme Merkezi, Jenkins topluluğunun çeşitli üyeleri tarafından geliştirilen ve sürdürülen açık kaynaklı plugin'lerin bir listesini sunan, Jenkins projesi tarafından işletilen bir hizmettir.</span>
    
    <span class="s2">Başta ve daha sonrasında indirilen bu pluginler kaldırılabilir.</span>
    
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Dikkat Edilmesi Gerekenler</span><span class="s1">:**</span>
        <span class="s0">- </span><span class="s2">Bir plugin'i kaldırmadan önce, o plugin'i kullanan herhangi bir job veya yapılandırma olup olmadığını kontrol edin. Aksi takdirde, kaldırma işlemi sonrasında bu job'lar veya yapılandırmalar düzgün çalışmayabilir.</span>
        <span class="s0">- </span><span class="s2">Bazı plugin'ler, diğer plugin'lere bağımlı olabilir. Bir plugin'i kaldırdığınızda, bağımlı olduğu diğer plugin'lerin de çalışmasını etkileyebilirsiniz. Bu nedenle, kaldırma işleminden önce bağımlılıkları kontrol etmek önemlidir.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">FOLDER</span><span class="s1">**</span>
    
    <span class="s2">Jenkins'te çok sayıda job</span><span class="s1">'</span><span class="s2">unuz olduğunda, bunları yönetmek zorlaşabilir. İşte bu noktada </span><span class="s1">&quot;</span><span class="s2">Folder</span><span class="s1">&quot;  </span><span class="s2">özelliği devreye girer.</span>
    
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Klasörlerin Amacı</span><span class="s1">:**</span>
        <span class="s0">- </span><span class="s2">Klasörler, job'ları mantıksal gruplar halinde düzenlemenize olanak tanır. Örneğin, farklı projeler, ortamlar </span><span class="s1">(</span><span class="s2">test, geliştirme, üretim</span><span class="s1">) </span><span class="s2">veya ekipler için ayrı klasörler oluşturabilirsiniz.</span>
        <span class="s0">- </span><span class="s2">Klasörler, job'ları daha kolay bulmanızı, yönetmenizi ve yetkilendirmenizi sağlar.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Klasör Oluşturma</span><span class="s1">:**</span>
        <span class="s2">New Item --</span><span class="s1">&gt; </span><span class="s2">Folder</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Klasör İçine Job Ekleme</span><span class="s1">:**</span>
        <span class="s0">- </span><span class="s2">Var olan bir job'u bir klasöre taşımak için, job'un yapılandırma sayfasına gidin ve </span><span class="s1">&quot;</span><span class="s2">Folder</span><span class="s1">&quot;  </span><span class="s2">seçeneğini kullanarak job'u istediğiniz klasöre taşıyın.</span>
        <span class="s0">- </span><span class="s2">Yeni bir job oluştururken, </span><span class="s1">&quot;</span><span class="s2">Folder</span><span class="s1">&quot;  </span><span class="s2">seçeneğini kullanarak job'u doğrudan bir klasörün içinde oluşturabilirsiniz.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">ARTIFACT</span><span class="s1">**</span>
    
    <span class="s2">Jenkins'te bir build işlemi </span><span class="s1">(</span><span class="s2">job çalıştırma</span><span class="s1">) </span><span class="s2">tamamlandığında, ortaya çeşitli sonuçlar çıkabilir. Bu sonuçların en önemlilerinden biri </span><span class="s1">&quot;</span><span class="s2">artifact</span><span class="s1">&quot; </span><span class="s2">olarak adlandırılır.</span>
    
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Artifact Nedir?</span><span class="s1">**</span>
        <span class="s0">- </span><span class="s2">Artifact, bir build işlemi sonucunda üretilen, dağıtılmaya veya kullanılmaya hazır olan herhangi bir dosyadır.</span>
        <span class="s0">- </span><span class="s2">Örnek olarak, bir web uygulamasının WAR dosyası, bir Java uygulamasının JAR dosyası, bir yazılım paketinin kurulum dosyası, test sonuçları raporları veya dokümantasyon dosyaları birer artifact olabilir.</span>
        <span class="s0">- </span><span class="s2">Jenkins, artifact'ları otomatik olarak saklayabilir, arşivleyebilir ve paylaşabilir.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Artifact'ları Yönetme</span><span class="s1">:**</span>
        <span class="s0">- </span><span class="s2">Jenkins'te, her job için artifact'ların saklanacağı bir dizin belirleyebilirsiniz.</span>
        <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Post-build Actions</span><span class="s1">&quot;  </span><span class="s2">bölümünde, artifact'ları arşivlemek, yayınlamak veya başka bir yere kopyalamak için çeşitli seçenekler mevcuttur.</span>
        <span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/artifact.png</span><span class="s1">)</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">WORKSPACE</span><span class="s1">:**</span>
    
    <span class="s2">/varlib/jenkins/workspace Jenkins'in </span><span class="s1">**</span><span class="s2">varsayılan workspace dizinidir.</span><span class="s1">**</span><span class="s2"> Jenkins, her job için bu dizin altında ayrı bir alt dizin oluşturur ve job'un tüm verilerini </span><span class="s1">(</span><span class="s2">kaynak kod, build çıktıları, log dosyaları vb.</span><span class="s1">) </span><span class="s2">bu dizinde saklar.</span>
    
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Çalışma Alanının Önemi</span><span class="s1">:**</span>
        <span class="s0">- </span><span class="s2">Çalışma alanı, Jenkins'in job</span><span class="s1">'</span><span class="s2">ları çalıştırmak için kullandığı temel dizindir.</span>
        <span class="s0">- </span><span class="s2">Job'lar, kaynak kodu bu dizine kopyalar, build işlemlerini bu dizinde gerçekleştirir ve artifact'ları bu dizinde oluşturur.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Çalışma Alanını Yönetme</span><span class="s1">:**</span>
        <span class="s0">- </span><span class="s2">Jenkins'te, her job için özel bir çalışma alanı dizini belirleyebilirsiniz.</span>
        <span class="s0">- </span><span class="s2">Büyük projelerde, disk alanını verimli kullanmak için çalışma alanlarını düzenli olarak temizlemek önemlidir.</span>
        <span class="s0">- </span><span class="s2">/var/lib/jenkins/workspace dizinine doğrudan erişmek yerine, Jenkins arayüzünü veya API'sini kullanarak job</span><span class="s1">'</span><span class="s2">ların verilerine erişmek daha güvenlidir.</span>

<span class="s0">---</span>

<span class="s0"># </span><span class="s2">BÖLÜM-2</span>

<span class="s0">## </span><span class="s2">İÇİNDEKİLER</span><span class="s1">:</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">1. Master-Slave Bağlantısı Kurulumu</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">2. Manuel Build Alma</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">3. Cron ile Build Alma</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">4. Trigger ile Build Alma</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">5. Jenkins User Yönetimi ve Parametrik Job'lar</span><span class="s1">**</span>

<span class="s0">---</span>

<span class="s0">##  </span><span class="s2">Master-Slave Bağlantısı Kurulumu</span>

<span class="s2">Bu adım, Jenkins'in iş yükünü dağıtmak için ikinci bir sanal makine </span><span class="s1">(</span><span class="s2">Slave</span><span class="s1">) </span><span class="s2">oluşturulmasını ve Master makine ile bağlantısının yapılandırılmasını içerir.</span>

<span class="s1">**</span><span class="s2">Adımlar</span><span class="s1">:**</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">İkinci Sanal Makine Kurulumu</span><span class="s1">:**</span><span class="s2"> Yeni bir sanal makine oluşturun </span><span class="s1">(</span><span class="s2">Slave</span><span class="s1">)</span><span class="s2">.</span>
<span class="s0">2. </span><span class="s1">**</span><span class="s2">Şifresiz SSH Bağlantısı</span><span class="s1">:**</span><span class="s2"> Master makineden Slave makineye şifresiz SSH bağlantısı kurun.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">SSH Anahtarı Oluşturma </span><span class="s1">(</span><span class="s2">Master</span><span class="s1">):**</span>
        
        <span class="s0">```</span><span class="s3">bash</span>
        <span class="s4">ssh-keygen -t rsa -b 4096 -C &quot;jenkins server ssh keys&quot; -f jenkins_id_rsa</span>
        <span class="s0">```</span>
        
        <span class="s2">Bu komut, Master makinede jenkins_id_rsa  ve jenkins_id_rsa.pub dosyalarını oluşturur.</span>
        
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Private Key'i Jenkins</span><span class="s1">'</span><span class="s2">e Ekleme</span><span class="s1">:**</span><span class="s2"> Oluşturulan jenkins_id_rsa dosyasının içeriğini Jenkins'in </span><span class="s1">**</span><span class="s2">Credentials</span><span class="s1">**</span><span class="s2"> bölümüne ekleyin. Bu, Jenkins'in SSH bağlantısını yönetmesini sağlar.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Public Key'i Slave</span><span class="s1">'</span><span class="s2">e Ekleme</span><span class="s1">:**</span>
        <span class="s0">- </span><span class="s2">Slave makinede root kullanıcısına geçin</span><span class="s1">:</span><span class="s2"> sudo su - </span><span class="s1">(</span><span class="s2">veya ilgili kullanıcı</span><span class="s1">)</span><span class="s2">.</span>
        <span class="s0">- </span><span class="s2">.ssh dizini yoksa oluşturun</span><span class="s1">:</span><span class="s2"> mkdir -p </span><span class="s1">~</span><span class="s2">/.ssh</span>
        <span class="s0">- </span><span class="s2">authorized_keys dosyası oluşturun veya varsa düzenleyin</span><span class="s1">:</span><span class="s2"> nano </span><span class="s1">~</span><span class="s2">/.ssh/authorized_keys</span>
        <span class="s0">- </span><span class="s2">Master makinede oluşturulan jenkins_id_rsa.pub dosyasının içeriğini bu dosyaya yapıştırın.</span>
        <span class="s0">- </span><span class="s2">Dosyanın doğru izinlere sahip olduğundan emin olun</span><span class="s1">:</span><span class="s2"> chmod 600 </span><span class="s1">~</span><span class="s2">/.ssh/authorized_keys ve chmod 700 </span><span class="s1">~</span><span class="s2">/.ssh</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">SSH Bağlantısını Test Etme</span><span class="s1">:**</span>
        
        <span class="s0">```</span><span class="s3">bash</span>
        <span class="s4">ssh -i ./jenkins_id_rsa root@&lt;slave_ip&gt;</span>
        <span class="s0">```</span>
        
         <span class="s2">Eğer bağlantı sırasında fingerprint doğrulaması yapılıyorsa kabul edin.</span>
        
<span class="s0">3. </span><span class="s1">**</span><span class="s2">SSH Agent Plugin Kurulumu</span><span class="s1">:**</span><span class="s2"> Jenkins'in Slave makineye erişmesi için </span><span class="s1">**</span><span class="s2">SSH Agent Plugin</span><span class="s1">**'</span><span class="s2">ini kurun.</span>
<span class="s0">4. </span><span class="s1">**</span><span class="s2">Jenkins Job'u Oluşturma ve Test Etme</span><span class="s1">:**</span><span class="s2"> Jenkins üzerinden yeni bir Job oluşturun ve Slave makinede çalıştığını doğrulamak için aşağıdaki komutlardan birini çalıştırın</span><span class="s1">:</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">ip -a</span>
    <span class="s4">ifconfig</span>
    <span class="s4">cat /etc/hostname</span>
    <span class="s0">```</span>
    

<span class="s0">## </span><span class="s2">1. Manuel Build Alma</span>

<span class="s1">**</span><span class="s2">1.Jenkins Job'unu Oluşturun</span><span class="s1">:**</span><span class="s2"> </span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/job-olusturma.png</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">2.SSH Agent'ı Yapılandırın</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s2">Job yapılandırmasında </span><span class="s1">**</span><span class="s2">Environment</span><span class="s1">**</span><span class="s2"> bölümünde </span><span class="s1">**</span><span class="s2">Use ssh agent</span><span class="s1">**</span><span class="s2"> seçeneğini işaretleyin ve önceden oluşturduğunuz credential'ı seçin.</span>

<span class="s1">**</span><span class="s2">3.Build Adımları Ekleyin</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Build Steps</span><span class="s1">**</span><span class="s2"> bölümünde </span><span class="s1">**</span><span class="s2">Execute shell</span><span class="s1">**</span><span class="s2"> adımı ekleyin.</span>
<span class="s0">- </span><span class="s2">Slave makinede çalıştırmak istediğiniz komutu bu alana yazın. Örneğin</span><span class="s1">:</span>
        
    <span class="s0">```</span><span class="s3">bash</span>
        <span class="s4">ssh -o 'StrictHostKeyChecking=no' root@&lt;slave_ip&gt; '/root/backup.sh'</span>
    <span class="s0">```</span>
        
<span class="s0">- </span><span class="s2">StrictHostKeyChecking=no, ilk bağlantıda fingerprint kontrolünü atlar </span><span class="s1">(</span><span class="s2">güvenlik açığı oluşturabileceğini unutmayın</span><span class="s1">)</span><span class="s2">.</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/manuel-build-backıp-script.png</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">4.Backup Script'i Oluşturma </span><span class="s1">(</span><span class="s2">Slave</span><span class="s1">)**</span>

<span class="s2">Bu adım, Slave makinesinde çalışacak bir yedekleme script'inin oluşturulmasını içerir.</span>

<span class="s1">**</span><span class="s2">4.1. /opt/mysql Klasörü Oluşturma</span><span class="s1">:**</span>
    
<span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo mkdir -p /opt/mysql</span>
<span class="s0">```</span>
    
<span class="s1">**</span><span class="s2">4.2./opt/backup Klasörü Oluşturma</span><span class="s1">:**</span>
    
<span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo mkdir -p /opt/backups</span>
<span class="s0">```</span>
    
<span class="s1">**</span><span class="s2">4.3.Backup Script'i Oluşturma</span><span class="s1">:**</span><span class="s2"> </span>

<span class="s2">/opt/backup.sh dosyasını oluşturun ve aşağıdaki içeriği ekleyin</span><span class="s1">:</span>
    
<span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">#!/bin/bash</span>
    
    <span class="s4">SOURCE_DIR=&quot;/opt/mysql&quot;</span>
    <span class="s4">BACKUP_DIR=&quot;/opt/backups&quot;</span>
    
    <span class="s4">mkdir -p &quot;$BACKUP_DIR&quot;</span>
    
    <span class="s4">TIMESTAMP=$(date +&quot;%Y%m%d_%H%M%S&quot;)</span>
    <span class="s4">BACKUP_FILENAME=&quot;backup_$(basename &quot;$SOURCE_DIR&quot;)_$TIMESTAMP.tar.gz&quot;</span>
    <span class="s4">BACKUP_PATH=&quot;$BACKUP_DIR/$BACKUP_FILENAME&quot;</span>
    
    <span class="s4">if tar -czf &quot;$BACKUP_PATH&quot; -C &quot;$(dirname &quot;$SOURCE_DIR&quot;)&quot; &quot;$(basename &quot;$SOURCE_DIR&quot;)&quot;; then</span>
        <span class="s4">echo &quot;Backup successful: $BACKUP_PATH&quot;</span>
    <span class="s4">else</span>
        <span class="s4">echo &quot;Backup failed!&quot;</span>
        <span class="s4">exit 1</span>
    <span class="s4">fi</span>
<span class="s0">```</span>
    
<span class="s1">**</span><span class="s2">4.4.Script'e Çalışma İzni Verme </span><span class="s1">(</span><span class="s2">Slave</span><span class="s1">):**</span>
    
<span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">sudo chmod +x /opt/backup.sh</span>
<span class="s0">```</span>
    
<span class="s1">**</span><span class="s2">4.5.Jenkins Job'unu Build Alma</span><span class="s1">:**</span><span class="s2"> </span>

<span class="s2">Jenkins'teki ilgili Job</span><span class="s1">'</span><span class="s2">u çalıştırın.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/manuel-build-backıp-script-build.png</span><span class="s1">)</span>

<span class="s0">## </span><span class="s2">2. Cron ile Build Alma</span>

<span class="s2">Cron ile build alma, Jenkins'teki Job</span><span class="s1">'</span><span class="s2">ların belirli zaman aralıklarında otomatik olarak çalıştırılmasını sağlar.</span>

<span class="s1">**</span><span class="s2">Adımlar</span><span class="s1">:**</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">Job Yapılandırması</span><span class="s1">:**</span><span class="s2"> Jenkins'teki ilgili Job</span><span class="s1">'</span><span class="s2">u açın ve yapılandırma sayfasına gidin.</span>
<span class="s0">2. </span><span class="s1">**</span><span class="s2">Triggers Bölümü</span><span class="s1">:**</span><span class="s2"> </span><span class="s1">&quot;</span><span class="s2">Build Triggers</span><span class="s1">&quot; </span><span class="s2">bölümünü bulun.</span>
<span class="s0">3. </span><span class="s1">**</span><span class="s2">Build Periodically</span><span class="s1">:**</span><span class="s2"> </span><span class="s1">&quot;</span><span class="s2">Build periodically</span><span class="s1">&quot; </span><span class="s2">seçeneğini işaretleyin.</span>
<span class="s0">4. </span><span class="s1">**</span><span class="s2">Zamanlama Ayarı</span><span class="s1">:**</span><span class="s2"> Cron ifadesini kullanarak zamanlama ayarlarını yapın. Örneğin, her gece 03</span><span class="s1">:</span><span class="s2">00'te çalıştırmak için</span><span class="s1">:</span><span class="s2"> 0 3 * </span><span class="s1">* *</span>

<span class="s1">**</span><span class="s2">Not</span><span class="s1">:**</span><span class="s2"> Cron ifadelerini Jenkins Job bazlı yönetmek, sunucudaki cron ayarlarını yönetmekten daha kolaydır, özellikle sunucu sayısı arttığında.</span>

<span class="s0">## </span><span class="s2">3. Trigger ile Build Alma</span>

<span class="s2">Bu adım, Gitlab gibi versiyon kontrol sistemlerindeki değişikliklerin otomatik olarak Jenkins build'lerini tetiklemesini sağlar.</span>

<span class="s1">**</span><span class="s2">Adımlar</span><span class="s1">:**</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">Gitlab Entegrasyonu</span><span class="s1">:**</span><span class="s2"> Jenkins ve Gitlab arasında entegrasyon sağlamak için gerekli eklentileri kurun ve yapılandırın.</span>
<span class="s0">2. </span><span class="s1">**</span><span class="s2">Webhook Oluşturma </span><span class="s1">(</span><span class="s2">Gitlab</span><span class="s1">):**</span><span class="s2"> Gitlab'ta, ilgili proje için bir webhook oluşturun. Bu webhook, değişiklik olduğunda Jenkins'e bildirim gönderecektir.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">URL</span><span class="s1">:**</span><span class="s2"> Jenkins sunucusunun URL'si ve Job</span><span class="s1">'</span><span class="s2">un build URL'si. Örneğin</span><span class="s1">:</span><span class="s2"> </span><span class="s5">https://jenkins.example.com/job/your_job/build</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Secret Token</span><span class="s1">:**</span><span class="s2"> Gitlab ve Jenkins arasındaki güvenliği sağlamak için bir secret token kullanın.</span>
<span class="s0">3. </span><span class="s1">**</span><span class="s2">Jenkins'te Token Oluşturma</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s2">Jenkins'te kullanıcı hesabınıza gidin.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Configure</span><span class="s1">**</span><span class="s2"> sayfasına gidin.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">API Token</span><span class="s1">**</span><span class="s2"> bölümünde bir token oluşturun.</span>
<span class="s0">4. </span><span class="s1">**</span><span class="s2">Gitlab Webhook Ayarları</span><span class="s1">:**</span><span class="s2"> Gitlab webhook ayarlarında</span><span class="s1">:</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Secret token</span><span class="s1">**</span><span class="s2"> alanına oluşturduğunuz token'ı girin.</span>
    <span class="s0">- </span><span class="s2">Hangi olayların webhook'u tetikleyeceğini seçin </span><span class="s1">(</span><span class="s2">push, merge request vb.</span><span class="s1">)</span><span class="s2">.</span>

<span class="s1">**</span><span class="s2">Örnek Curl Komutu </span><span class="s1">(</span><span class="s2">Gitlab'tan Jenkins</span><span class="s1">'</span><span class="s2">i Tetikleme</span><span class="s1">):**</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">curl -X POST -L --user your-user-name:apiToken \</span>
<span class="s4">https://jenkins.example.com/job/your_job/build</span>
<span class="s0">```</span>

<span class="s0">- </span><span class="s2">your-user-name</span><span class="s1">: </span><span class="s2">Jenkins kullanıcı adınız.</span>
<span class="s0">- </span><span class="s2">apiToken</span><span class="s1">: </span><span class="s2">Jenkins'te oluşturduğunuz API token.</span>
<span class="s0">- </span><span class="s2">your_job</span><span class="s1">: </span><span class="s2">Jenkins'teki Job</span><span class="s1">'</span><span class="s2">un adı.</span>

<span class="s1">**</span><span class="s2">Not</span><span class="s1">:**</span><span class="s2"> Jenkins lokalde çalışıyorsa ve Gitlab'daki branch</span><span class="s1">'</span><span class="s2">lerden tetiklenmesi isteniyorsa, Gitlab'ın da yerelde olması tercih edilir. Alternatif olarak, Cloudflare Tunnel gibi servisler kullanılabilir.</span>

<span class="s0">### </span><span class="s2">6. Cloudflare Tunnel ve Benzeri Servisler</span>

<span class="s2">Bu servisler, dışarıdaki bir yapının içerideki bir sunucuya ulaşması gerektiğinde kullanılır.</span>

<span class="s1">**</span><span class="s2">Örnek Servisler</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Cloudflare Tunnel</span><span class="s1">:**</span><span class="s2"> Güvenli bir tünel oluşturma hizmeti.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">ngrok</span><span class="s1">:**</span><span class="s2"> Yerel sunucuları internete açmak için kullanılır.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Pagekite</span><span class="s1">:**</span><span class="s2"> Yerel sunucuları internete açmak için kullanılır.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Serveo</span><span class="s1">:**</span><span class="s2"> SSH tünelleme kullanarak yerel sunucuları internete açar.</span>

<span class="s0">## </span><span class="s2">Jenkins User Yönetimi ve Parametrik Job'lar</span>

<span class="s2">Bu notlar, Jenkins'te kullanıcı yönetimi, rol tabanlı yetkilendirme ve parametrik job'lar hakkında bilgi içermektedir.</span>

<span class="s0">### </span><span class="s2">1. User Yönetimi</span>

<span class="s2">Jenkins'te kullanıcı yönetimi, kimlerin Jenkins'e erişebileceğini ve hangi yetkilere sahip olacağını belirlemeyi sağlar.</span>

<span class="s1">**</span><span class="s2">Yöntemler</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Manuel User Oluşturma</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Admin Paneli</span><span class="s1">:**</span><span class="s2"> Manage Jenkins → Users yolunu izleyerek yeni kullanıcılar oluşturabilirsiniz.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Config Dosyası</span><span class="s1">:**</span><span class="s2"> Kullanıcı bilgileri /var/lib/jenkins/config.xml dosyasında saklanır. Bu dosyanın yedeklenmesi önemlidir.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">LDAP/Active Directory Entegrasyonu</span><span class="s1">:**</span><span class="s2"> Jenkins'i LDAP veya Active Directory ile entegre ederek kullanıcıları bu dizin servislerinden alabilirsiniz.</span>

<span class="s1">**</span><span class="s2">Uygulama Örneği</span><span class="s1">:**</span>

<span class="s1">**</span><span class="s2">Manuel User Oluşturma</span><span class="s1">:**</span><span class="s2"> 4 adet kullanıcı manuel olarak oluşturuldu.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/user-olusturma.png</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">Jenkins Konfigürasyonunu Yedekleme</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s2">/var/lib/jenkins/config.xml dosyasını güvenli bir lokasyona kopyalayın.</span>

 <span class="s0">- </span><span class="s2">Örneğin</span><span class="s1">:</span><span class="s2"> cp /var/lib/jenkins/config.xml /home/jenkins-backup/</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Yedek Kontrolü</span><span class="s1">:**</span><span class="s2"> Dosyaların hash değerlerini alıp karşılaştırarak yedeklemenin başarılı olduğundan emin olun.</span>

<span class="s1">**</span><span class="s2">Yetkilendirme Testi</span><span class="s1">:**</span><span class="s2"> Bir Job'a sadece okuma yetkisi verin ve gizli modda giriş yaparak yetkilendirmenin doğru çalıştığını kontrol edin.</span>

<span class="s0">### </span><span class="s2">2. Rol Tabanlı Yetkilendirme </span><span class="s1">(</span><span class="s2">RBAC</span><span class="s1">) </span><span class="s2">ve Matris Tabanlı Yetkilendirme</span>

<span class="s2">Jenkins’te yetkilendirme, kullanıcıların veya grupların belirli eylemleri gerçekleştirmesine izin vermek için farklı yöntemlerle yönetilebilir. İki yaygın yöntem Role-Based </span><span class="s1">(</span><span class="s2">RBAC</span><span class="s1">) </span><span class="s2">ve Matrix-Based Security’dir.</span>

<span class="s2">1️⃣ Role-Based Authorization Strategy </span><span class="s1">(</span><span class="s2">RBAC</span><span class="s1">)</span>

<span class="s2">Bu yöntemde kullanıcılara roller atanır ve bu roller belirli yetkilerle ilişkilendirilir. Böylece aynı role sahip kullanıcılar, sistem içinde aynı izinlere sahip olur.</span>

<span class="s2">Özellikleri</span><span class="s1">:</span>

<span class="s2">✅ Kullanıcıları gruplar halinde yöneterek merkezi kontrol sağlar.</span>
<span class="s2">✅ Global, Job ve Agent seviyelerinde roller oluşturulabilir.</span>
<span class="s2">✅ Büyük organizasyonlar için uygundur, yeni kullanıcılar sadece ilgili role atanarak yetkilendirilebilir.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/role-based-plugin.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/security-role-base.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/manage-roles.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/assign-roles.png</span><span class="s1">)</span>

<span class="s2">2️⃣ Matrix-Based Security</span>

<span class="s2">Bu yöntemde kullanıcılar veya gruplar doğrudan yetkilendirilir, roller kullanılmaz. Kullanıcı bazında hassas ve detaylı izin ayarı yapmak gerektiğinde kullanışlıdır.</span>

<span class="s2">Özellikleri</span><span class="s1">:</span>

<span class="s2">✅ Kullanıcı ve gruplara doğrudan izinler atanabilir.</span>
<span class="s2">✅ RBAC’ye göre daha esnektir, her kullanıcı için farklı yetki seviyeleri belirlenebilir.</span>
<span class="s2">✅ Küçük ekiplerde veya detaylı yetkilendirme gereken durumlarda daha uygundur.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/matrix-based-plugin.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/security-matrix-based.png</span><span class="s1">)</span>


<span class="s0">### </span><span class="s2">3. Parametrik Job'lar</span>

<span class="s2">Parametrik Job'lar, kullanıcıların bir build'i başlatırken değerlerini belirleyebileceği parametreler tanımlamanıza olanak tanır. Bu, aynı Job'u farklı konfigürasyonlarla çalıştırmayı kolaylaştırır.</span>

<span class="s1">**</span><span class="s2">Adımlar</span><span class="s1">:**</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">Job Yapılandırması</span><span class="s1">:**</span><span class="s2"> İlgili Job'un yapılandırma sayfasına gidin.</span>
<span class="s0">2. </span><span class="s1">**</span><span class="s2">This project is parameterized</span><span class="s1">:**</span><span class="s2"> </span><span class="s1">&quot;</span><span class="s2">This project is parameterized</span><span class="s1">&quot; </span><span class="s2">seçeneğini işaretleyin.</span>
<span class="s0">3. </span><span class="s1">**</span><span class="s2">Parametre Tanımlama</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">String Parameter</span><span class="s1">:**</span><span class="s2"> Metin tabanlı değerler için.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Boolean Parameter</span><span class="s1">:**</span><span class="s2"> Doğru/Yanlış değerleri için.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Choice Parameter</span><span class="s1">:**</span><span class="s2"> Önceden tanımlanmış seçenekler arasından seçim yapmak için.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">File Parameter</span><span class="s1">:**</span><span class="s2"> Bir dosya yüklemek için.</span>
<span class="s0">4. </span><span class="s1">**</span><span class="s2">Parametreleri Kullanma</span><span class="s1">:**</span><span class="s2"> Build adımlarında parametre değerlerine </span><span class="s1">$</span><span class="s2">PARAMETRE_ADI şeklinde erişebilirsiniz. Örneğin, bir shell script'te parametre değerini kullanmak için</span><span class="s1">:</span>
    
<span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">echo &quot;Parametre değeri: $MY_PARAMETER&quot;</span>
<span class="s0">```</span>
    
<span class="s1">**</span><span class="s2">Örnek Senaryolar</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Ortam Seçimi</span><span class="s1">:**</span><span class="s2"> Hangi ortamda </span><span class="s1">(</span><span class="s2">development, staging, production</span><span class="s1">) </span><span class="s2">build alınacağını belirlemek için.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Sürüm Numarası</span><span class="s1">:**</span><span class="s2"> Uygulama sürümünü belirlemek için.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Branch Seçimi</span><span class="s1">:**</span><span class="s2"> Hangi Git branch'inin build alınacağını seçmek için.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job1.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job2.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job3.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job4.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job5.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job6.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job7.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman2_ss/parametrik-job8.png</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">Kaynaklar</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Role Strategy Plugin</span><span class="s1">:**</span><span class="s2"> </span><span class="s1">[**</span><span class="s5">https://plugins.jenkins.io/role-strategy/</span><span class="s1">**](</span><span class="s5">https://www.google.com/url?sa=E&amp;q=https%3A%2F%2Fplugins.jenkins.io%2Frole-strategy%2F</span><span class="s1">)</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Medium Makalesi </span><span class="s1">(</span><span class="s2">User ve Rol Yönetimi</span><span class="s1">):**</span><span class="s2"> </span><span class="s1">[**</span><span class="s5">https://medium.com/@srghimire061/how-to-manage-users-and-roles-in-jenkins-fe6a7a8be344</span><span class="s1">**](</span><span class="s5">https://www.google.com/url?sa=E&amp;q=https%3A%2F%2Fmedium.com%2F%40srghimire061%2Fhow-to-manage-users-and-roles-in-jenkins-fe6a7a8be344</span><span class="s1">)</span>



<span class="s0">----</span>

<span class="s0"># </span><span class="s2">BÖLÜM-3</span>

<span class="s0">## </span><span class="s2">İÇİNDEKİLER</span><span class="s1">:</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">1. Pipeline</span><span class="s1">: </span><span class="s2">Stage View Eklentisi Kurulumu</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">2. Groovy ile Basit Bir Pipeline Oluşturma</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">3. Jenkins Credential Yönetimi</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">4. Generate Declarative Directive Kullanımı</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">5. Jenkins Agent’ları ile Dağıtık Build Ortamları Oluşturma</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">6. Java Uygulamaları için Tool Ekleme </span><span class="s1">(</span><span class="s2">Maven Örneği</span><span class="s1">)**</span>

<span class="s0">---</span>

<span class="s1">**</span><span class="s2">1. Pipeline</span><span class="s1">: </span><span class="s2">Stage View Eklentisi Kurulumu</span><span class="s1">**</span>

<span class="s2">Bu plugin ile pipeline çıktısını aşamalar halinde görebilir ve her aşamanın durumunu kolayca takip edebiliriz.</span>

<span class="s1">**</span><span class="s2">2. Groovy ile Basit Bir Pipeline Oluşturma</span><span class="s1">**</span>

<span class="s2">Jenkins arayüzünden Groovy script'i kullanarak basit bir Pipeline oluşturalım.</span>

<span class="s0">1. </span><span class="s2">Jenkins ana sayfasında, </span><span class="s1">&quot;</span><span class="s2">New Item—</span><span class="s1">&gt;</span><span class="s2">Pipeline</span><span class="s1">&quot;</span>
<span class="s0">2. </span><span class="s2">Bir isim verin </span><span class="s1">(</span><span class="s2">örneğin, </span><span class="s1">&quot;</span><span class="s2">groovy-pipeline</span><span class="s1">&quot;)</span><span class="s2">.</span>
<span class="s0">3. </span><span class="s1">&quot;</span><span class="s2">OK</span><span class="s1">&quot;</span><span class="s2">a tıklayın.</span>
<span class="s0">4. </span><span class="s2">Pipeline yapılandırma sayfasında, </span><span class="s1">&quot;</span><span class="s2">Pipeline</span><span class="s1">&quot; </span><span class="s2">bölümüne gidin, menüden </span><span class="s1">&quot;</span><span class="s2">Pipeline script'i</span><span class="s1">&quot; </span><span class="s2">seçeneğini seçin.Aşağıdaki Groovy kodunu metin alanına yapıştırın</span><span class="s1">:</span>

<span class="s0">```</span><span class="s3">groovy</span>

<span class="s4">pipeline {</span>
    <span class="s4">agent any</span>
    <span class="s4">stages {</span>
        <span class="s4">stage('Merhaba') {</span>
            <span class="s4">steps {</span>
                <span class="s4">echo 'Merhaba Dünya!'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
        <span class="s4">stage('Tarih') {</span>
            <span class="s4">steps {</span>
                <span class="s4">sh 'date'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
<span class="s4">}</span>
<span class="s0">```</span>

<span class="s0">5. </span><span class="s2">“Save” ile kaydedin.</span>
<span class="s0">6. </span><span class="s2">“Build Now” ile pipeline ı çalıştırın.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/pipelinestatus.png</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">Jenkins'te pipeline oluşturmanın iki temel yolu vardır</span><span class="s1">:**</span>

<span class="s2">Jenkins Arayüzünde Doğrudan Kodlama </span><span class="s1">(&quot;**</span><span class="s2">Pipeline script</span><span class="s1">**&quot;): </span><span class="s2">Bu yöntemde, pipeline betiğini doğrudan Jenkins işinin yapılandırma sayfasındaki metin alanına yazarsınız. </span>

<span class="s2">SCM'den Pipeline Betiği Çekme </span><span class="s1">(&quot;**</span><span class="s2">Pipeline script from SCM</span><span class="s1">**&quot;): </span><span class="s2">Bu yöntemde, pipeline betiğini </span><span class="s1">(</span><span class="s2">genellikle Jenkinsfile adında</span><span class="s1">) </span><span class="s2">bir versiyon kontrol sisteminde saklarsınız. Jenkins, pipeline'ı çalıştırdığında betiği otomatik olarak SCM</span><span class="s1">'</span><span class="s2">den çeker.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/pipeline-olusturma.png</span><span class="s1">)</span>

<span class="s0">3. </span><span class="s2">Jenkins Credential Yönetimi</span>

<span class="s2">Jenkins'te hassas bilgileri </span><span class="s1">(</span><span class="s2">şifreler, API anahtarları vb.</span><span class="s1">) </span><span class="s2">güvenli bir şekilde saklamak için credential özelliğini kullanabilirsiniz.</span>

<span class="s2">Amaç</span><span class="s1">: </span><span class="s2">Pipeline'larda güvenli bir şekilde hassas bilgileri kullanmak.</span>

<span class="s2">Adımlar</span><span class="s1">:</span>
<span class="s2">Jenkins ana sayfasında, </span><span class="s1">&quot;</span><span class="s2">Manage Jenkins -</span><span class="s1">&gt; </span><span class="s2">Credentials -</span><span class="s1">&gt; </span><span class="s2">System -</span><span class="s1">&gt; </span><span class="s2">Global credentials </span><span class="s1">(</span><span class="s2">unrestricted</span><span class="s1">)&quot; </span><span class="s2">bölümünden add new credential'a tıklayarak yeni credential oluşturun.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/credential1.png</span><span class="s1">)</span>

<span class="s2">Burada ;</span>

<span class="s2">1- Kind</span><span class="s1">: </span><span class="s2">açılır menüden </span><span class="s1">&quot;</span><span class="s2">Secret text</span><span class="s1">&quot; </span><span class="s2">seçeneğini seçin. Bu, gizli bir metin verisi saklayacağımızı belirtir.</span>

<span class="s2">2- Scope</span><span class="s1">: </span><span class="s2">Bu, kimlik bilgilerinin tüm Jenkins projelerinde ve işlerinde kullanılabileceği anlamına gelir. Genellikle en iyi seçenektir.</span>
<span class="s2">Açıklama</span><span class="s1">: </span><span class="s2">Kimlik bilgilerinin kullanılabilirliğini sınırlamak istiyorsanız, proje veya klasör bazında bir kapsam seçebilirsiniz. Örneğin, yalnızca belirli bir projede kullanılacak bir API anahtarı için, o projeyi seçebilirsiniz.</span>

<span class="s2">3- Secret</span><span class="s1">: </span><span class="s2">Buraya, saklamak istediğiniz gerçek gizli metin verisini girin. Bu, gerçekte API anahtarınız, şifreniz veya başka bir hassas bilginiz olacaktır. Bu alana girilen bilgi Jenkins tarafından şifrelenerek saklanacaktır.</span>

<span class="s2">4- ID</span><span class="s1">: </span><span class="s2">Bu, credential'ımıza verdiğimiz benzersiz ID</span><span class="s1">'</span><span class="s2">dir. Pipeline kodumuzda bu ID'yi kullanarak credential</span><span class="s1">'</span><span class="s2">a başvuracağız.</span>
<span class="s2">Açıklama</span><span class="s1">: </span><span class="s2">Anlamlı ve kolayca hatırlanabilir bir ID seçin. Boşluk veya özel karakterler kullanmaktan kaçının. </span>

<span class="s2">5- Description</span><span class="s1">: </span><span class="s2">Credential'ımızın ne için kullanıldığını açıklayan bir metindir.</span>
<span class="s2">Açıklama</span><span class="s1">: </span><span class="s2">Açıklayıcı bir metin girmeniz, gelecekte bu credential'ı kimin veya neyin kullandığını anlamanıza yardımcı olacaktır. Ne tür bir veri sakladığınızı ve nerede kullanıldığını belirtmek faydalı olabilir.</span>

<span class="s2">6-  </span><span class="s1">&quot;</span><span class="s2">Create</span><span class="s1">&quot; </span><span class="s2">Butonuna Tıklayın</span>

<span class="s2">New Item'dan yeni bir pipeline oluşturun</span><span class="s1">:</span>

<span class="s0">````</span>
<span class="s4">pipeline {</span>
    <span class="s4">agent any</span>

    <span class="s4">stages {</span>
        <span class="s4">stage('Write Secret to File') {</span>
            <span class="s4">steps {</span>
                <span class="s4">withCredentials([string(credentialsId: 'Secret_data', variable: 'SECRET_VALUE')]) {</span>
                    <span class="s4">script {</span>
                        <span class="s4">// Gizli değeri bir dosyaya yaz</span>
                        <span class="s4">def secretFilePath = 'secret.txt'</span>
                        <span class="s4">writeFile file: secretFilePath, text: &quot;$SECRET_VALUE&quot;</span>

                        <span class="s4">// Dosyanın içeriğini konsola yazdır (isteğe bağlı, debug için)</span>
                        <span class="s4">//sh &quot;cat ${secretFilePath}&quot;</span>

                        <span class="s4">// Dosyanın oluşturulduğunu doğrulamak için bir mesaj yazdır (isteğe bağlı)</span>
                        <span class="s4">echo &quot;Secret value has been written to ${secretFilePath}&quot;</span>
                    <span class="s4">}</span>
                <span class="s4">}</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
    <span class="s4">post {</span>
        <span class="s4">always {</span>
            <span class="s4">// Dosyayı artifact olarak arşivle</span>
            <span class="s4">archiveArtifacts artifacts: 'secret.txt', allowEmptyArchive: true</span>

            <span class="s4">// Dosyayı sil (isteğe bağlı, güvenliği artırmak için)</span>
            <span class="s4">//deleteDir()</span>
            <span class="s4">//echo &quot;Cleanup complete.&quot;</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
<span class="s4">}</span>
<span class="s0">````</span>
<span class="s2">Save butanuna tıklayarak pipeline kaydedebilirsiniz. Ardından </span><span class="s1">&quot;</span><span class="s2">Buil Now</span><span class="s1">&quot; </span><span class="s2">ile çalıştıralım.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/credential2.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/credential3.png</span><span class="s1">)</span>

<span class="s2">Aşağıdaki ekran görüntüsü, pipeline tarafından oluşturulan secret.txt adlı artifact'e tıklandığında açılan içeriği göstermektedir. Bu dosya, Jenkins tarafından güvenli bir şekilde saklanan Secret_data adlı credential'dan alınan gizli metni içermektedir.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/credential4.png</span><span class="s1">)</span>



<span class="s0">4. </span><span class="s2">Generate Declarative Directive Kullanımı</span>

<span class="s2">Jenkins'te </span><span class="s1">&quot;</span><span class="s2">Generate Declarative Directive</span><span class="s1">&quot; </span><span class="s2">veya </span><span class="s1">&quot;</span><span class="s2">Pipeline Syntax</span><span class="s1">&quot; </span><span class="s2">olarak bilinen araç, Declarative Pipeline sözdizimini öğrenmeyi ve kullanmayı kolaylaştırmak için tasarlanmıştır. Bu araç, kullanıcı arayüzü üzerinden belirli adımları yapılandırarak, karşılık gelen Declarative Pipeline kodunu otomatik olarak oluşturmanıza olanak tanır.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/dec-dir-gen1.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/dec-dir-gen2.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/dec-dir-gen3.png</span><span class="s1">)</span>



<span class="s1">**</span><span class="s2">Jenkins Agent'ları ile Dağıtık Build Ortamları Oluşturma</span><span class="s1">**</span>

<span class="s2">Jenkins agent'ları, Jenkins master sunucusunun iş yükünü dağıtmak ve farklı ortamlarda build işlemleri gerçekleştirmek için kullanılan bağımsız yürütme ortamlarıdır. </span>

<span class="s1">**</span><span class="s2">1. Agent Kavramı ve Önemi</span><span class="s1">:**</span>

<span class="s2">Jenkins, build işlemlerini </span><span class="s1">(</span><span class="s2">derleme, test, deployment vb.</span><span class="s1">) </span><span class="s2">gerçekleştirmek için kaynaklara ihtiyaç duyar. Agent'lar, bu kaynakları Jenkins master sunucusundan bağımsız olarak sağlayarak aşağıdaki avantajları sunar</span><span class="s1">:</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Yük Dengeleme</span><span class="s1">:**</span><span class="s2"> Build işlemlerini birden fazla agent'a dağıtarak master sunucunun yükünü azaltır.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Farklı Ortamlar</span><span class="s1">:**</span><span class="s2"> Farklı işletim sistemleri, araçlar ve bağımlılıklar gerektiren projeler için özel agent'lar oluşturulabilir.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Paralel Build</span><span class="s1">:**</span><span class="s2"> Birden fazla agent kullanarak build işlemlerini paralel olarak gerçekleştirerek süreci hızlandırır.</span>

<span class="s1">**</span><span class="s2">2. Agent Ekleme ve Yapılandırma</span><span class="s1">:**</span>

<span class="s2">Agent'lar, Jenkins arayüzünde </span><span class="s1">&quot;</span><span class="s2">Manage Jenkins</span><span class="s1">&quot; </span><span class="s2">-</span><span class="s1">&gt; &quot;</span><span class="s2">Nodes</span><span class="s1">&quot; (</span><span class="s2">veya </span><span class="s1">&quot;</span><span class="s2">Manage Nodes and Clouds</span><span class="s1">&quot;) </span><span class="s2">bölümünden eklenir ve yönetilir.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Node Türü</span><span class="s1">:**</span><span class="s2"> </span><span class="s1">&quot;</span><span class="s2">Permanent Agent</span><span class="s1">&quot; (</span><span class="s2">Kalıcı Agent</span><span class="s1">) </span><span class="s2">veya </span><span class="s1">&quot;</span><span class="s2">Launch agents on demand</span><span class="s1">&quot; (</span><span class="s2">İhtiyaç Duyulduğunda Agent Başlat</span><span class="s1">) </span><span class="s2">seçeneklerinden birini seçin.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Agent Adı ve Açıklaması</span><span class="s1">:**</span><span class="s2"> Agent'a anlamlı bir ad verin ve açıklamasını ekleyin.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Remote root directory</span><span class="s1">:**</span><span class="s2"> Agent üzerinde Jenkins'in çalışma alanı olarak kullanacağı bir dizin belirtin. Bu dizin, Jenkins'in agent üzerinde dosyaları saklayacağı ve build işlemlerini gerçekleştireceği yerdir.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Labels</span><span class="s1">:**</span><span class="s2"> Agent'a etiketler atayın. Bu etiketler, pipeline'larda belirli agent</span><span class="s1">'</span><span class="s2">ları hedeflemek için kullanılır </span><span class="s1">(</span><span class="s2">aşağıdaki bölümlere bakınız</span><span class="s1">)</span><span class="s2">.</span>

<span class="s1">**</span><span class="s2">3. SSH Anahtar Tabanlı Kimlik Doğrulama ile Agent Bağlantısı</span><span class="s1">:**</span>

<span class="s2">Agent'lar, Jenkins master sunucusu ile SSH protokolü üzerinden güvenli bir şekilde iletişim kurar. SSH anahtar tabanlı kimlik doğrulama, şifre tabanlı kimlik doğrulamaya göre daha güvenli bir yöntemdir.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">3.1. SSH Anahtar Çifti Oluşturma</span><span class="s1">:**</span>
    
    <span class="s2">Agent üzerinde aşağıdaki komutu kullanarak bir SSH anahtar çifti oluşturun</span><span class="s1">:</span>
    
    <span class="s0">```</span><span class="s3">groovy</span>
    
    <span class="s4">ssh-keygen -t rsa -b 4096 -N &quot;&quot; -f ~/.ssh/id_rsa</span>
    <span class="s0">```</span>
    
    <span class="s2">Bu komut, </span><span class="s1">~</span><span class="s2">/.ssh dizininde id_rsa </span><span class="s1">(</span><span class="s2">private key</span><span class="s1">) </span><span class="s2">ve id_rsa.pub </span><span class="s1">(</span><span class="s2">public key</span><span class="s1">) </span><span class="s2">olmak üzere iki dosya oluşturur. </span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">3.2. Public Key'i Agent</span><span class="s1">'</span><span class="s2">a Yetkilendirme</span><span class="s1">:**</span>
    
    <span class="s2">Agent üzerindeki </span><span class="s1">~</span><span class="s2">/.ssh/authorized_keys dosyasına, public key'in içeriğini ekleyin. Eğer dosya yoksa oluşturun ve doğru izinleri ayarlayın</span><span class="s1">:</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">mkdir -p ~/.ssh</span>
    <span class="s4">chmod 700 ~/.ssh</span>
    <span class="s4">touch ~/.ssh/authorized_keys</span>
    <span class="s4">chmod 600 ~/.ssh/authorized_keys</span>
    <span class="s4">nano ~/.ssh/authorized_keys # public key buraya yapıştırılır</span>
    
    <span class="s0">```</span>
    
    <span class="s2">nano veya tercih ettiğiniz bir metin düzenleyici ile </span><span class="s1">~</span><span class="s2">/.ssh/authorized_keys dosyasını açın ve public key'in içeriğini </span><span class="s1">(</span><span class="s2"> cat </span><span class="s1">~</span><span class="s2">/.ssh/id_rsa.pub komutu ile elde edebilirsiniz</span><span class="s1">) </span><span class="s2">dosyanın sonuna yapıştırın.</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">3.3. Jenkins'te SSH Credential Oluşturma</span><span class="s1">:**</span>
    
    <span class="s2">Jenkins'te, </span><span class="s1">&quot;</span><span class="s2">Credentials</span><span class="s1">&quot; </span><span class="s2">bölümüne gidin ve yeni bir credential ekleyin</span><span class="s1">:</span>
    
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Kind</span><span class="s1">:**</span><span class="s2"> SSH Username with private key</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Scope</span><span class="s1">:**</span><span class="s2"> Global </span><span class="s1">(</span><span class="s2">veya ihtiyacınıza göre daha kısıtlı bir kapsam</span><span class="s1">)</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Username</span><span class="s1">:**</span><span class="s2"> Agent üzerinde SSH erişimine sahip olan kullanıcı adı </span><span class="s1">(</span><span class="s2">örneğin, ubuntu, ec2-user, jenkins</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Private Key</span><span class="s1">:**</span><span class="s2"> Oluşturduğunuz SSH private key'in içeriğini yapıştırın veya dosyadan yükleyin </span><span class="s1">(~</span><span class="s2">/.ssh/id_rsa</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">ID</span><span class="s1">:**</span><span class="s2"> Credential'a benzersiz bir ID verin </span><span class="s1">(</span><span class="s2">örneğin, agent_ssh_key</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">Description</span><span class="s1">:**</span><span class="s2"> Credential'ın ne için kullanıldığını açıklayan bir metin girin.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">3.4. Agent Konfigürasyonu</span><span class="s1">:**</span>
    
    <span class="s1">&quot;</span><span class="s2">Manage Jenkins</span><span class="s1">&quot; </span><span class="s2">-</span><span class="s1">&gt; &quot;</span><span class="s2">Nodes</span><span class="s1">&quot; </span><span class="s2">bölümünde, oluşturduğunuz agent'ı düzenleyin</span><span class="s1">:</span>
    
    <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Launch method</span><span class="s1">&quot; (</span><span class="s2">Başlatma yöntemi</span><span class="s1">) </span><span class="s2">olarak </span><span class="s1">&quot;</span><span class="s2">Launch agents via SSH</span><span class="s1">&quot; </span><span class="s2">seçeneğini seçin.</span>
    <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Host Key Verification Strategy</span><span class="s1">&quot; (</span><span class="s2">Host Anahtarı Doğrulama Stratejisi</span><span class="s1">) </span><span class="s2">olarak </span><span class="s1">&quot;</span><span class="s2">Manually trusted key Verification Strategy</span><span class="s1">&quot; </span><span class="s2">veya </span><span class="s1">&quot;</span><span class="s2">Non verifying Verification Strategy</span><span class="s1">&quot; </span><span class="s2">seçeneğini seçin.</span>
    <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Credentials</span><span class="s1">&quot; (</span><span class="s2">Kimlik Bilgileri</span><span class="s1">) </span><span class="s2">açılır menüsünden, oluşturduğunuz SSH credential'ı seçin.</span>
    <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Host</span><span class="s1">&quot; </span><span class="s2">name alanına agent'ın IP adresini veya hostname</span><span class="s1">'</span><span class="s2">ini yazın.</span>

<span class="s1">**</span><span class="s2">4. Pipeline'larda Agent Kullanımı</span><span class="s1">:**</span>

<span class="s2">Pipeline'larda agent direktifi ile belirli agent</span><span class="s1">'</span><span class="s2">ları hedefleyebilirsiniz.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Label ile Agent Seçimi</span><span class="s1">:**</span>

<span class="s0">```</span>
<span class="s4">pipeline {</span>
    <span class="s4">agent { label 'my-agent' } // &quot;my-agent&quot; etiketine sahip agent'ta çalışır</span>
    <span class="s4">stages {</span>
        <span class="s4">stage('Build') {</span>
            <span class="s4">steps {</span>
                <span class="s4">sh 'echo &quot;Build aşaması çalışıyor...&quot;'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
<span class="s4">}</span>
<span class="s0">```</span>
<span class="s2">Agent Bağlantısı;</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/agent-baglantisi.png</span><span class="s1">)</span>

<span class="s2">Pipeline'da kullanımı</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/agent-pipeline.png</span><span class="s1">)</span>
<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/agent-pipeline2.png</span><span class="s1">)</span>

<span class="s2">Eğer pipeline'ın tamamının belirli bir agent üzerinde çalışmasını istemiyorsanız, agent none direktifini kullanabilirsiniz. Bu durumda, her bir stage'in kendi agent direktifini içermesi gerekir.</span>

<span class="s0">```</span>
<span class="s4">pipeline {</span>
    <span class="s4">agent none</span>
    <span class="s4">stages {</span>
        <span class="s4">stage('Build') {</span>
            <span class="s4">agent { label 'my-agent' }</span>
            <span class="s4">steps {</span>
                <span class="s4">sh 'echo &quot;Build aşaması çalışıyor...&quot;'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
        <span class="s4">stage('Test') {</span>
            <span class="s4">agent { label 'another-agent' }</span>
            <span class="s4">steps {</span>
                <span class="s4">sh 'echo &quot;Test aşaması çalışıyor...&quot;'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
<span class="s4">}</span>
<span class="s0">```</span>

<span class="s1">**</span><span class="s2">Java Uygulamaları için Tool Ekleme </span><span class="s1">(</span><span class="s2">Maven Örneği</span><span class="s1">):**</span>

<span class="s2">Java uygulamaları için genellikle Maven gibi build araçlarına ihtiyaç duyulur. Jenkins, bu araçları otomatik olarak yükleyebilir veya önceden yüklenmiş araçları kullanabilir.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman3_ss/mvn-tool.png</span><span class="s1">)</span>

<span class="s0">- </span><span class="s1">**&quot;</span><span class="s2">Manage Jenkins</span><span class="s1">&quot; </span><span class="s2">-</span><span class="s1">&gt; &quot;</span><span class="s2">Global Tool Configuration</span><span class="s1">&quot;**</span><span class="s2"> bölümüne gidin.</span>
<span class="s0">- </span><span class="s2">Maven bölümünde, </span><span class="s1">&quot;</span><span class="s2">Maven installations</span><span class="s1">&quot; </span><span class="s2">ekleyin.</span>
<span class="s0">- </span><span class="s1">**&quot;</span><span class="s2">Name</span><span class="s1">&quot;**</span><span class="s2"> alanına Maven kurulumuna bir isim verin </span><span class="s1">(</span><span class="s2">örneğin, Maven 3.8.1</span><span class="s1">)</span><span class="s2">.</span>
<span class="s0">- </span><span class="s1">**&quot;</span><span class="s2">Installation directory</span><span class="s1">&quot;**</span><span class="s2"> Eğer agent üzerinde maven zaten varsa kurulum dizinini belirtin.</span>
<span class="s0">- </span><span class="s1">**&quot;</span><span class="s2">Install automatically</span><span class="s1">&quot;**</span><span class="s2"> Eğer maven otomatik kurulacaksa bu seçeneği seçin ve jenkinsin belirtiği url den kurulumu yapın.</span>
<span class="s0">- </span><span class="s1">**&quot;</span><span class="s2">Install from local directory</span><span class="s1">&quot;**</span><span class="s2"> Eğer lokalde olan bir maven kullanılacaksa bu seçeneği seçin ve dizini belirtin.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Spesifik Bir URL'den Çekme</span><span class="s1">:**</span><span class="s2"> Jenkins'in belirtilen URL</span><span class="s1">'</span><span class="s2">den Maven'i indirmesini ve kurmasını sağlayabilirsiniz. Bu seçenek, belirli bir Maven sürümüne ihtiyaç duyduğunuzda kullanışlıdır.</span>

<span class="s2">Jenkins, build işlemi sırasında gerekli olan Maven'i otomatik olarak agent</span><span class="s1">'</span><span class="s2">a yükleyecektir.</span>

<span class="s0">---</span>

<span class="s0"># </span><span class="s2">BÖLÜM-4 Jenkins ve Tomcat ile Java Web Uygulaması Dağıtımı</span>

<span class="s0">## </span><span class="s2">İÇİNDEKİLER</span><span class="s1">:</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">1. Tomcat 11 Kurulumu</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">2. Tomcat Kullanıcılarını Yapılandırma</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">3. Uzaktan Erişimi Yapılandırma </span><span class="s1">(</span><span class="s2">Jenkins ve Tomcat Farklı Sunucularda ise</span><span class="s1">)**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">4. Tomcat'i Başlat</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">5. Jenkins'te Gerekli Eklentiyi Yükleme</span><span class="s1">: </span><span class="s2">Deploy to container Plugin</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">6. Global Tool Configuration </span><span class="s1">(</span><span class="s2">Maven Yapılandırması</span><span class="s1">)**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">7. Jenkins Pipeline Oluşturma ve Yapılandırma</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">8. Credential ve Pipeline Entegrasyonu </span><span class="s1">(</span><span class="s2">tomcat-deploy Credential</span><span class="s1">)**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">9. Pipeline'ı Çalıştırın ve Sonuçları İzleyin</span><span class="s1">**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">10. Alternatif Deployment Yöntemi</span><span class="s1">: &quot;</span><span class="s2">deploy-war-to-tomcat-without-plugin</span><span class="s1">&quot; (</span><span class="s2">Pluginsiz Dağıtım</span><span class="s1">)**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">11. Jenkins Configuration as Code </span><span class="s1">(</span><span class="s2">JCasc</span><span class="s1">)**</span>
<span class="s0">### </span><span class="s1">**</span><span class="s2">12. Seed Jobs ve Job DSL</span><span class="s1">**</span>

<span class="s0">---</span>

<span class="s1">**</span><span class="s2">Jenkins ve Tomcat ile Java Web Uygulaması Dağıtımı</span><span class="s1">**</span>

<span class="s2">Bu bölümde, bir Java web uygulamasının Jenkins tarafından otomatik olarak Tomcat 11 sunucusuna nasıl dağıtılacağını bakacağız.</span>

<span class="s1">**</span><span class="s2">Tomcat 11 Kurulumu</span><span class="s1">:**</span>

<span class="s2">Aşağıdaki adımlar, Tomcat 11'in /opt dizinine kurulmasını göstermektedir</span><span class="s1">:</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">Dizine Git</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    
    <span class="s4">cd /opt</span>
    <span class="s0">```</span>
    
<span class="s0">2. </span><span class="s1">**</span><span class="s2">Tomcat 11'i İndir</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    
    <span class="s4">wget https://dlcdn.apache.org/tomcat/tomcat-11/v11.0.3/bin/apache-tomcat-11.0.3.tar.gz</span>
    <span class="s0">```</span>
    
<span class="s0">3. </span><span class="s1">**</span><span class="s2">Arşivi Çıkar</span><span class="s1">:**</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    
    <span class="s4">tar -xf apache-tomcat-11.0.3.tar.gz</span>
    <span class="s0">```</span>
    

<span class="s1">**</span><span class="s2">Tomcat Kullanıcılarını Yapılandırma</span><span class="s1">:**</span>

<span class="s2">Tomcat'in web arayüzüne erişim ve uygulamaların dağıtımı için kullanıcıları yapılandırmanız gerekmektedir.</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">tomcat-users.xml Dosyasını Düzenle</span><span class="s1">:**</span>

<span class="s0">```</span><span class="s3">bash</span>

<span class="s4">nano /opt/apache-tomcat-11.0.3/conf/tomcat-users.xml</span>
<span class="s0">```</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">Kullanıcıları Ekle</span><span class="s1">:**</span>
    
    <span class="s2">Aşağıdaki kod bloğunu tomcat-users.xml dosyasına ekleyin </span><span class="s1">(</span><span class="s2"> </span><span class="s1">&lt;</span><span class="s2">tomcat-users</span><span class="s1">&gt;</span><span class="s2"> etiketi içinde</span><span class="s1">):</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    
    <span class="s4">&lt;role rolename=&quot;manager-gui&quot;/&gt;</span>
    <span class="s4">&lt;role rolename=&quot;manager-script&quot;/&gt;</span>
    <span class="s4">&lt;role rolename=&quot;manager-jmx&quot;/&gt;</span>
    <span class="s4">&lt;role rolename=&quot;manager-status&quot;/&gt;</span>
    
    <span class="s4">&lt;user username=&quot;admin&quot;</span>
          <span class="s4">password=&quot;admin&quot;</span>
          <span class="s4">roles=&quot;manager-gui,manager-script,manager-jmx,manager-status&quot;/&gt;</span>
    
    <span class="s4">&lt;user username=&quot;deployer&quot;</span>
          <span class="s4">password=&quot;deployer&quot;</span>
          <span class="s4">roles=&quot;manager-script&quot;/&gt;</span>
    
    <span class="s4">&lt;user username=&quot;tomcat&quot;</span>
          <span class="s4">password=&quot;s3cret&quot;</span>
          <span class="s4">roles=&quot;manager-gui&quot;/&gt;</span>
    <span class="s0">```</span>
    
    <span class="s0">- </span><span class="s2">admin</span><span class="s1">: </span><span class="s2">Tomcat web arayüzüne tam erişim sağlar.</span>
    <span class="s0">- </span><span class="s2">deployer</span><span class="s1">: </span><span class="s2">Uygulamaların dağıtımı için kullanılır </span><span class="s1">(</span><span class="s2">Jenkins ile entegrasyon için önerilen kullanıcı</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s2">tomcat</span><span class="s1">: </span><span class="s2">Yalnızca Tomcat web arayüzüne erişim sağlar.</span>
    
    <span class="s1">**</span><span class="s2">Güvenlik Notu</span><span class="s1">:**</span><span class="s2"> Üretim ortamında, varsayılan kullanıcı adlarını ve parolalarını </span><span class="s1">**</span><span class="s2">değiştirin</span><span class="s1">**</span><span class="s2"> ve güçlü parolalar kullanın</span><span class="s1">!</span>
    
    <span class="s1">**</span><span class="s2">Uzaktan Erişimi Yapılandırma </span><span class="s1">(</span><span class="s2">Jenkins ve Tomcat Farklı Sunucularda ise</span><span class="s1">):**</span>
    
    <span class="s2">Eğer Jenkins ve Tomcat </span><span class="s1">**</span><span class="s2">farklı sunucularda</span><span class="s1">**</span><span class="s2"> çalışıyorsa, Jenkins'in Tomcat</span><span class="s1">'</span><span class="s2">e uzaktan erişebilmesi için Tomcat'te ek yapılandırma yapmanız gerekmektedir. Bu yapılandırma, Tomcat'in web arayüzüne ve deployment işlevlerine uzaktan erişime izin vermeyi içerir.</span>
    
    <span class="s0">1. </span><span class="s1">**</span><span class="s2">context.xml Dosyalarını Bul</span><span class="s1">:**</span>
        
        <span class="s2">Tomcat sunucunuzda, aşağıdaki komutu kullanarak aşağıda belirtilen dosyaları  bulun</span><span class="s1">:</span>
        
        <span class="s0">- </span><span class="s2">/opt/apache-tomcat-11.0.3/webapps/manager/META-INF/context.xml</span>
        <span class="s0">- </span><span class="s2">/opt/apache-tomcat-11.0.3/webapps/host-manager/META-INF/context.xml</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">find / -name context.xml</span>
    <span class="s0">```</span>
    

<span class="s1">**</span><span class="s2">context.xml Dosyalarını Düzenle</span><span class="s1">:**</span>

<span class="s2">Her iki context.xml dosyasını da bir metin düzenleyici ile açın ve </span><span class="s1">&lt;Context&gt;</span><span class="s2"> etiketi içinde aşağıdaki </span><span class="s1">&lt;Valve&gt;</span><span class="s2">etiketini bulun</span>

<span class="s0">```</span><span class="s3">bash</span>

<span class="s4">&lt;Valve className=&quot;org.apache.catalina.valves.RemoteAddrValve&quot; allow=&quot;127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1|JENKINS_SUNUCUSUNUN_IP_ADRESI&quot;/&gt;</span>
<span class="s0">```</span>

<span class="s1">**</span><span class="s2">JENKINS_SUNUCUSUNUN_IP_ADRESI</span><span class="s1">**: </span><span class="s2">Bu kısmı, </span><span class="s1">**</span><span class="s2">Jenkins sunucunuzun gerçek IP adresiyle</span><span class="s1">**</span><span class="s2"> değiştirin. Bu, yalnızca belirli bir IP adresinden </span><span class="s1">(</span><span class="s2">Jenkins sunucusu</span><span class="s1">) </span><span class="s2">Tomcat'in yönetici arayüzüne erişime izin verecektir. Birden fazla IP adresine izin vermek için, adresleri | karakteriyle ayırabilirsiniz.</span><span class="s1">(</span><span class="s2">test için allow=“.</span><span class="s1">*</span><span class="s2">” yapılandırabilirsiniz fakat bu şekilde Tomcat sunucusunun yönetim arayüzünü </span><span class="s1">(</span><span class="s2">manager ve host-manager uygulamaları</span><span class="s1">)</span><span class="s2"> </span><span class="s1">**</span><span class="s2">herhangi bir IP adresinden</span><span class="s1">**</span><span class="s2"> gelen isteklere açmış olursunuz.</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">Örnek </span><span class="s1">(</span><span class="s2">Tek IP Adresi</span><span class="s1">):**</span>

<span class="s0">```</span><span class="s3">bash</span>

<span class="s4">&lt;Valve className=&quot;org.apache.catalina.valves.RemoteAddrValve&quot; allow=&quot;127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1|192.168.1.100&quot;/&gt;</span>
<span class="s0">```</span>

<span class="s2">Bu örnek, hem yerel erişime </span><span class="s1">(</span><span class="s2">127.0.0.1 ve </span><span class="s1">::</span><span class="s2">1</span><span class="s1">) </span><span class="s2">hem de 192.168.1.100 IP adresinden erişime izin verir.</span>

<span class="s1">**</span><span class="s2">Tomcat'i Başlat</span><span class="s1">:**</span>

<span class="s0">```</span><span class="s3">bash</span>
<span class="s4">cd /opt/apache-tomcat-11.0.3/bin/</span>
<span class="s4">./startup.sh</span>
<span class="s0">```</span>

<span class="s0">- </span><span class="s2">Tomcat, güvenlik nedeniyle varsayılan olarak web arayüzüne </span><span class="s1">(</span><span class="s2">manager uygulaması</span><span class="s1">) </span><span class="s2">ve yönetim işlevlerine yalnızca yerel </span><span class="s1">(</span><span class="s2">localhost</span><span class="s1">) </span><span class="s2">erişime izin verir. Bu, Tomcat'in yetkisiz erişime karşı korunmasını sağlar.</span>
<span class="s0">- </span><span class="s2">Eğer Jenkins ve Tomcat farklı sunucularda çalışıyorsa, Jenkins'in Tomcat</span><span class="s1">'</span><span class="s2">e uzaktan dağıtım yapabilmesi için, Tomcat'in Jenkins</span><span class="s1">'</span><span class="s2">in IP adresinden gelen isteklere </span><span class="s1">**</span><span class="s2">açıkça</span><span class="s1">**</span><span class="s2"> izin vermesi gerekir.</span>
<span class="s0">- </span><span class="s1">&lt;Valve&gt; etiketi ve özellikle allow özelliği, Tomcat'e hangi IP adreslerinden gelen isteklere izin vereceğini belirtmek için kullanılır.</span>
<span class="s0">- </span><span class="s2">allow özelliğine </span><span class="s1">**</span><span class="s2">Jenkins'in çalıştığı VM</span><span class="s1">'</span><span class="s2">nin IP adresini</span><span class="s1">**</span><span class="s2"> ekleyerek, Tomcat'e yalnızca Jenkins</span><span class="s1">'</span><span class="s2">in yönetici arayüzüne erişebileceğini ve dağıtım yapabileceğini söylersiniz.</span>

<span class="s1">**</span><span class="s2">Jenkins'te Gerekli Eklentiyi Yükleme</span><span class="s1">: </span><span class="s2">Deploy to container Plugin </span><span class="s1">(**</span><span class="s2"> Plugin ile dağıtım yöntemi için gereklidir.</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">Global Tool Configuration </span><span class="s1">(</span><span class="s2">Maven Yapılandırması, dokuman3 de burayı yapmıştık. Burada proje içinde kullanılacak mvn versiyonu aynı olmalı</span><span class="s1">)**</span>

<span class="s1">**</span><span class="s2">Jenkins Pipeline Oluşturma ve Yapılandırma</span><span class="s1">:**</span>

<span class="s2">Jenkins'te, Tomcat'e dağıtımı otomatikleştirecek bir pipeline oluşturun</span><span class="s1">:</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">Yeni Pipeline İşi Oluşturun</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s2">Jenkins ana sayfanızda </span><span class="s1">&quot;</span><span class="s2">New Item</span><span class="s1">&quot; </span><span class="s2">seçeneğine tıklayın.</span>
    <span class="s0">- </span><span class="s2">Bir isim verin </span><span class="s1">(</span><span class="s2">örneğin, tomcat-deploy-approve</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Pipeline</span><span class="s1">&quot; </span><span class="s2">türünü seçin ve </span><span class="s1">&quot;</span><span class="s2">OK</span><span class="s1">&quot; </span><span class="s2">butonuna tıklayın.</span>
<span class="s0">2. </span><span class="s1">**</span><span class="s2">Pipeline Tanımını Yapılandırın</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s2">İş yapılandırma sayfasında, </span><span class="s1">&quot;</span><span class="s2">Pipeline</span><span class="s1">&quot; </span><span class="s2">bölümüne gidin.</span>
    <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Definition</span><span class="s1">&quot; </span><span class="s2">açılır menüsünden </span><span class="s1">&quot;</span><span class="s2">Pipeline script</span><span class="s1">&quot; </span><span class="s2">seçeneğini seçin.</span>
    <span class="s0">- </span><span class="s2">pipeline kodunu yazın</span><span class="s1">:</span>
    
    <span class="s0">```</span><span class="s3">groovy</span>
    
    <span class="s4">pipeline {</span>
        <span class="s4">agent {</span>
            <span class="s4">label 'linux'  // Bu pipeline'ın &quot;linux&quot; etiketine sahip bir agent üzerinde çalışacağını belirtir.</span>
        <span class="s4">}</span>
        <span class="s4">tools {</span>
            <span class="s4">maven 'maven 3.8.6' // Bu pipeline'ın &quot;maven 3.8.6&quot; adında bir Maven kurulumu kullanacağını belirtir.</span>
        <span class="s4">}</span>
        <span class="s4">stages {</span>
            <span class="s4">stage('Checkout Code') {</span>
                <span class="s4">steps {</span>
                    <span class="s4">checkout([$class: 'GitSCM', branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[url: 'https://gitlab.com/ozguryazilimkiskampi/tomcat-deployment-example.git']]])</span>
                <span class="s4">}</span>
            <span class="s4">}</span>
            <span class="s4">stage('Test') {</span>
                <span class="s4">steps {</span>
                    <span class="s4">sh 'mvn test'</span>
                <span class="s4">}</span>
            <span class="s4">}</span>
            <span class="s4">stage('Build') {</span>
                <span class="s4">steps {</span>
                    <span class="s4">sh 'mvn package'</span>
                <span class="s4">}</span>
            <span class="s4">}</span>
            <span class="s4">stage(&quot;Deploy on Test&quot;) {</span>
                <span class="s4">steps {</span>
                    <span class="s4">deploy adapters: [</span>
                        <span class="s4">tomcat9(credentialsId: 'tomcat-deploy',</span>
                         <span class="s4">path: '', url: 'http://192.168.186.145:8080')],</span>
                         <span class="s4">contextPath: '', war: '**/*.war'</span>
    
                <span class="s4">}</span>
    
            <span class="s4">}</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
    <span class="s0">```</span>
    
    <span class="s0">- </span><span class="s2">agent { label </span><span class="s1">'</span><span class="s2">linux' }</span><span class="s1">: </span><span class="s2">Pipeline'ın linux etiketine sahip bir agent üzerinde çalışacağını belirtir. Agent yapılandırması için önceki bölümlere bakın.</span>
    <span class="s0">- </span><span class="s2">tools { maven </span><span class="s1">'</span><span class="s2">maven 3.8.6' }</span><span class="s1">: </span><span class="s2">Pipeline'ın maven 3.8.6 adında bir Maven kurulumu kullanacağını belirtir. Global Tool Configuration bölümünde bu kurulumun yapılandırıldığından emin olun.</span>
    <span class="s0">- </span><span class="s2">checkout</span><span class="s1">: </span><span class="s2">Git repository'sinden kaynak kodunu çeker.</span>
    <span class="s0">- </span><span class="s2">mvn test</span><span class="s1">: </span><span class="s2">Maven ile testleri çalıştırır.</span>
    <span class="s0">- </span><span class="s2">mvn package</span><span class="s1">: </span><span class="s2">Maven ile projeyi paketler </span><span class="s1">(</span><span class="s2">WAR dosyası oluşturur</span><span class="s1">)</span><span class="s2">.</span>
    <span class="s0">- </span><span class="s2">deploy</span><span class="s1">: &quot;</span><span class="s2">Deploy to container Plugin</span><span class="s1">&quot; </span><span class="s2">eklentisini kullanarak WAR dosyasını Tomcat sunucusuna dağıtır.</span>
        <span class="s0">- </span><span class="s2">credentialsId</span><span class="s1">: '</span><span class="s2">tomcat-deploy'</span><span class="s1">: </span><span class="s2">Tomcat credential'ının ID</span><span class="s1">'</span><span class="s2">sini belirtir </span><span class="s1">(</span><span class="s2">önceki adımlarda oluşturduğunuz</span><span class="s1">)</span><span class="s2">.</span>
        <span class="s0">- </span><span class="s2">url</span><span class="s1">: '</span><span class="s5">http://192.168.186.145:8080</span><span class="s1">': </span><span class="s2">Tomcat sunucusunun URL'sini belirtir.</span>
        <span class="s0">- </span><span class="s2">war</span><span class="s1">: '**</span><span class="s2">/</span><span class="s1">*</span><span class="s2">.war'</span><span class="s1">: </span><span class="s2">Dağıtılacak WAR dosyasının yolunu belirtir.</span>
<span class="s0">3. </span><span class="s1">**&quot;</span><span class="s2">Save</span><span class="s1">&quot; </span><span class="s2">Butonuna Tıklayarak Pipeline'ı Kaydedin.</span><span class="s1">**</span>

<span class="s1">**</span><span class="s2">Credential ve Pipeline Entegrasyonu </span><span class="s1">(</span><span class="s2">tomcat-deploy Credential</span><span class="s1">):**</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman4_ss/tomcat-deploy-cred.png</span><span class="s1">)</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">Credential Kimlik Bilgilerini Kontrol Edin</span><span class="s1">:**</span><span class="s2"> tomcat-deploy credential'ının, Tomcat sunucusuna bağlanmak için doğru kullanıcı adı ve parolaya sahip olduğundan emin olun. Jenkins -</span><span class="s1">&gt;</span><span class="s2"> Credentials bölümünden bu credential'ı kontrol edebilirsiniz.</span>
    <span class="s0">- </span><span class="s2">username</span><span class="s1">:</span><span class="s2"> deployer </span><span class="s1">(</span><span class="s2">veya Tomcat'te oluşturduğunuz dağıtım kullanıcısı</span><span class="s1">)</span>
    <span class="s0">- </span><span class="s2">password</span><span class="s1">: </span><span class="s2">Kullanıcının parolası</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Pipeline Kodunda Credential ID'sini Doğru Kullanın</span><span class="s1">:**</span>
    
    <span class="s2">Pipeline kodunuzda, deploy adımında doğru credentialsId değerini kullandığınızdan emin olun </span><span class="s1">(</span><span class="s2">tomcat-deploy</span><span class="s1">)</span><span class="s2">.</span>
    

<span class="s1">**</span><span class="s2">Pipeline'ı Çalıştırın ve Sonuçları İzleyin</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s2">Pipeline'ı manuel olarak başlatmak için iş sayfasına gidin ve </span><span class="s1">&quot;</span><span class="s2">Build Now</span><span class="s1">&quot; </span><span class="s2">butonuna tıklayın.</span>
<span class="s0">- </span><span class="s2">Pipeline'ın konsol çıktısını izleyerek, her aşamanın başarıyla tamamlandığından emin olun.</span>
<span class="s0">- </span><span class="s2">Dağıtım başarılı olursa, web uygulamanızın Tomcat sunucusunda çalıştığını doğrulayın.</span>

<span class="s1">**</span><span class="s2">Alternatif Deployment Yöntemi</span><span class="s1">: &quot;</span><span class="s2">deploy-war-to-tomcat-without-plugin</span><span class="s1">&quot; (</span><span class="s2">Pluginsiz Dağıtım</span><span class="s1">):**</span>

<span class="s2">Bazı durumlarda, belirli bir plugin kullanmak yerine, daha esnek bir çözüm tercih edebilirsiniz. Bu örnekte, </span><span class="s1">&quot;</span><span class="s2">Deploy to container Plugin</span><span class="s1">&quot; </span><span class="s2">kullanmadan, doğrudan SSH üzerinden Tomcat sunucusuna dağıtım yapacağız.</span>

<span class="s1">**</span><span class="s2">Ek Credential Oluşturun </span><span class="s1">(</span><span class="s2">SSH Key ile Kimlik Doğrulama</span><span class="s1">):**</span>

<span class="s2">Pluginsiz dağıtım için, Tomcat sunucusuna SSH ile bağlanmak için bir credential oluşturmanız gerekmektedir. Bu credential, bir SSH private key içermelidir.</span>

<span class="s0">- </span><span class="s1">**</span><span class="s2">SSH Anahtar Çifti Oluşturun</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s2">Tomcat sunucusunda </span><span class="s1">(</span><span class="s2">veya Jenkins sunucusunda</span><span class="s1">)</span><span class="s2">, aşağıdaki komutu kullanarak bir SSH anahtar çifti oluşturun</span><span class="s1">:</span>
        
        <span class="s0">```</span><span class="s3">bash</span>
        <span class="s4">ssh-keygen -t rsa -b 4096 -N &quot;&quot; -f ~/.ssh/id_rsa_deploy</span>
        <span class="s0">```</span>
        
        <span class="s2">Bu komut, </span><span class="s1">~</span><span class="s2">/.ssh dizininde id_rsa_deploy </span><span class="s1">(</span><span class="s2">private key</span><span class="s1">) </span><span class="s2">ve id_rsa_deploy.pub </span><span class="s1">(</span><span class="s2">public key</span><span class="s1">) </span><span class="s2">dosyalarını oluşturur.</span>
        
<span class="s0">- </span><span class="s1">**</span><span class="s2">Public Key'i Tomcat Sunucusuna Yetkilendirin</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s2">Tomcat sunucusunda, </span><span class="s1">~</span><span class="s2">/.ssh/authorized_keys dosyasına public key'in içeriğini ekleyin</span><span class="s1">:</span>
    
    <span class="s0">```</span><span class="s3">bash</span>
    <span class="s4">mkdir -p ~/.ssh</span>
    <span class="s4">chmod 700 ~/.ssh</span>
    <span class="s4">touch ~/.ssh/authorized_keys</span>
    <span class="s4">chmod 600 ~/.ssh/authorized_keys</span>
    <span class="s4">cat ~/.ssh/id_rsa_deploy.pub &gt;&gt; ~/.ssh/authorized_keys</span>
    <span class="s0">```</span>
    
<span class="s0">- </span><span class="s1">**</span><span class="s2">Jenkins'te SSH Credential Oluşturun</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s1">&quot;</span><span class="s2">Credentials</span><span class="s1">&quot; </span><span class="s2">bölümüne gidin ve yeni bir credential ekleyin</span><span class="s1">:</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">Kind</span><span class="s1">:**</span><span class="s2"> SSH Username with private key</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">Scope</span><span class="s1">:**</span><span class="s2"> Global</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">Username</span><span class="s1">:**</span><span class="s2"> Tomcat sunucusunda SSH erişimine sahip olan kullanıcı adı </span><span class="s1">(</span><span class="s2">örneğin, ubuntu, ec2-user, tomcat</span><span class="s1">)</span><span class="s2">.</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">Private Key</span><span class="s1">:**</span><span class="s2"> Oluşturduğunuz SSH private key'in içeriğini yapıştırın </span><span class="s1">(~</span><span class="s2">/.ssh/id_rsa_deploy</span><span class="s1">)</span><span class="s2">.</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">ID</span><span class="s1">:**</span><span class="s2"> Credential'a benzersiz bir ID verin </span><span class="s1">(</span><span class="s2">örneğin, tomcat_ssh_key</span><span class="s1">)</span><span class="s2">.</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">Description</span><span class="s1">:**</span><span class="s2"> Credential'ın ne için kullanıldığını açıklayan bir metin girin </span><span class="s1">(</span><span class="s2">örneğin, </span><span class="s1">&quot;</span><span class="s2">Tomcat sunucusuna SSH erişimi için</span><span class="s1">&quot;)</span><span class="s2">.</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Pipeline'ı Oluşturun</span><span class="s1">:**</span>
<span class="s0">- </span><span class="s1">**</span><span class="s2">Önemli Not</span><span class="s1">: </span><span class="s2">Nexus Entegrasyonu </span><span class="s1">(</span><span class="s2">Opsiyonel</span><span class="s1">)**</span>

<span class="s2">Bu pipeline, üretilen artifact'ı </span><span class="s1">(</span><span class="s2">WAR dosyası</span><span class="s1">) </span><span class="s2">Nexus Repository Manager'a yükleme adımlarını içermektedir. </span><span class="s1">**</span><span class="s2">Nexus kullanımı tamamen opsiyoneldir.</span><span class="s1">**</span><span class="s2"> Eğer Nexus kullanmıyorsanız, pipeline'daki </span><span class="s1">&quot;</span><span class="s2">Publish to Nexus</span><span class="s1">&quot; </span><span class="s2">aşamasını </span><span class="s1">**</span><span class="s2">kaldırabilir</span><span class="s1">**</span><span class="s2"> veya devre dışı bırakabilirsiniz.  </span><span class="s1">**</span><span class="s2">Nexus Kullanılıyorsa </span><span class="s1">&quot;</span><span class="s2">Nexus Artifact Uploader</span><span class="s1">&quot; </span><span class="s2">plugin’in kurmak gerekir.</span><span class="s1">**</span>

<span class="s0">```</span><span class="s3">bash</span>

<span class="s4">pipeline {</span>
    
    <span class="s4">agent {</span>
        <span class="s4">label 'linux'</span>
    <span class="s4">}</span>

    <span class="s4">environment {</span>
        <span class="s4">TOMCAT_SERVER = '&lt;tomcat_ip&gt;'</span>
        <span class="s4">TOMCAT_PATH = '/opt/tomcat/webapps'</span>
        <span class="s4">TOMCAT_SERVER_USER = 'root'</span>
        <span class="s4">TOMCAT_STARTUP_SCRIPT = '/opt/tomcat/bin/startup.sh'</span>
        <span class="s4">TOMCAT_SHUTDOWN_SCRIPT = '/opt/tomcat/bin/shutdown.sh'</span>
        <span class="s4">NEXUS_VERSION = &quot;nexus3&quot;</span>
        <span class="s4">NEXUS_PROTOCOL = &quot;http&quot;</span>
        <span class="s4">NEXUS_URL = &quot;&lt;nexus_ip&gt;:&lt;port&gt;&quot;</span>
        <span class="s4">NEXUS_REPOSITORY = &quot;maven-releases&quot;</span>
        <span class="s4">NEXUS_CREDENTIAL_ID = &quot;nexus-credentials&quot;</span>
    <span class="s4">}</span>
    
    <span class="s4">tools {</span>
        <span class="s4">maven 'maven 3.8.6'</span>
    <span class="s4">}</span>
    
    <span class="s4">stages {</span>
        <span class="s4">stage('Checkout Code'){</span>
            <span class="s4">steps{</span>
                <span class="s4">checkout scm</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
        
        <span class="s4">stage('Test'){</span>
            <span class="s4">steps{</span>
                <span class="s4">sh 'mvn test'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
        
        <span class="s4">stage('Build'){</span>
            <span class="s4">steps{</span>
                <span class="s4">sh 'mvn package'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
        
        <span class="s4">stage('Deploy Onayı') {</span>
            <span class="s4">steps {</span>
                <span class="s4">input m</span>
                <span class="s4">essage: 'Uygulamayı test ortamına deploy etmek istiyor musunuz?',</span>
                      <span class="s4">ok: 'Evet, Deploy Et'</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
        
        <span class="s4">stage(&quot;Deploy on Test&quot;) {</span>
            <span class="s4">steps {</span>
                <span class="s4">sshagent(['deploy-ssh-key']) {</span>
                    <span class="s4">sh '''</span>
                        <span class="s4">scp -o StrictHostKeyChecking=no target/*.war ${TOMCAT_SERVER_USER}@${TOMCAT_SERVER}:${TOMCAT_PATH}</span>
                        <span class="s4">ssh -o StrictHostKeyChecking=no ${TOMCAT_SERVER_USER}@${TOMCAT_SERVER} &quot;sudo sh ${TOMCAT_SHUTDOWN_SCRIPT}&quot;</span>
                        <span class="s4">ssh -o StrictHostKeyChecking=no ${TOMCAT_SERVER_USER}@${TOMCAT_SERVER} &quot;sudo sh ${TOMCAT_STARTUP_SCRIPT}&quot;</span>
                    <span class="s4">'''</span>
                <span class="s4">}</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
        
        <span class="s4">stage(&quot;Publish to Nexus&quot;) {</span>
            <span class="s4">steps {</span>
                <span class="s4">script {</span>
                    <span class="s4">pom = readMavenPom file: &quot;pom.xml&quot;</span>
                    <span class="s4">filesByGlob = findFiles(glob: &quot;target/*.${pom.packaging}&quot;)</span>
                    <span class="s4">artifactPath = filesByGlob[0].path</span>
                    <span class="s4">artifactExists = fileExists artifactPath</span>

                    <span class="s4">if(artifactExists) {</span>
                        <span class="s4">echo &quot;*** File: ${artifactPath}, group: ${pom.groupId}, packaging: ${pom.packaging}, version ${pom.version}&quot;</span>
                        
                        <span class="s4">nexusArtifactUploader(</span>
                            <span class="s4">nexusVersion: NEXUS_VERSION,</span>
                            <span class="s4">protocol: NEXUS_PROTOCOL,</span>
                            <span class="s4">nexusUrl: NEXUS_URL,</span>
                            <span class="s4">groupId: pom.groupId,</span>
                            <span class="s4">version: pom.version,</span>
                            <span class="s4">repository: NEXUS_REPOSITORY,</span>
                            <span class="s4">credentialsId: NEXUS_CREDENTIAL_ID,</span>
                            <span class="s4">artifacts: [</span>
                                <span class="s4">[artifactId: pom.artifactId,</span>
                                <span class="s4">classifier: '',</span>
                                <span class="s4">file: artifactPath,</span>
                                <span class="s4">type: pom.packaging],</span>
                                <span class="s4">[artifactId: pom.artifactId,</span>
                                <span class="s4">classifier: '',</span>
                                <span class="s4">file: &quot;pom.xml&quot;,</span>
                                <span class="s4">type: &quot;pom&quot;]</span>
                            <span class="s4">]</span>
                        <span class="s4">)</span>
                    <span class="s4">} else {</span>
                        <span class="s4">error &quot;*** File: ${artifactPath}, could not be found&quot;</span>
                    <span class="s4">}</span>
                <span class="s4">}</span>
            <span class="s4">}</span>
        <span class="s4">}</span>
    <span class="s4">}</span>
<span class="s4">}</span>

<span class="s0">```</span>

<span class="s1">**</span><span class="s2">Pipeline'ın İşleyişi</span><span class="s1">:**</span>

<span class="s0">1. </span><span class="s1">**</span><span class="s2">Checkout Code</span><span class="s1">:**</span><span class="s2"> Kaynak kodunu Git deposundan çeker.</span>
<span class="s0">2. </span><span class="s1">**</span><span class="s2">Test</span><span class="s1">:**</span><span class="s2"> Maven ile testleri çalıştırır.</span>
<span class="s0">3. </span><span class="s1">**</span><span class="s2">Build</span><span class="s1">:**</span><span class="s2"> Maven ile projeyi paketler </span><span class="s1">(</span><span class="s2">WAR dosyası oluşturur</span><span class="s1">)</span><span class="s2">.</span>
<span class="s0">4. </span><span class="s1">**</span><span class="s2">Deploy Onayı</span><span class="s1">:**</span><span class="s2"> Kullanıcıdan dağıtım için onay ister.</span>
<span class="s0">5. </span><span class="s1">**</span><span class="s2">Deploy on Test</span><span class="s1">:**</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">sshagent</span><span class="s1">(['</span><span class="s2">deploy-ssh-key'</span><span class="s1">]):**</span><span class="s2"> deploy-ssh-key adlı SSH credential'ını kullanarak SSH bağlantısı kurar. Bu credential, Tomcat sunucusuna bağlanmak için gerekli olan private key'i içerir.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">scp -o StrictHostKeyChecking=no target/</span><span class="s1">*</span><span class="s2">.war </span><span class="s1">$</span><span class="s2">{TOMCAT_SERVER_USER}@</span><span class="s1">$</span><span class="s2">{TOMCAT_SERVER}</span><span class="s1">:$</span><span class="s2">{TOMCAT_PATH}</span><span class="s1">:**</span><span class="s2"> WAR dosyasını Tomcat sunucusuna kopyalar.</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">scp</span><span class="s1">:**</span><span class="s2"> SSH üzerinden dosya kopyalama komutu.</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">o StrictHostKeyChecking=no</span><span class="s1">:**</span><span class="s2"> İlk bağlantıda host key'i otomatik olarak kabul eder. </span><span class="s1">(</span><span class="s2">Güvenlik açısından dikkatli olunmalı, gerçek ortamda bu seçenek kaldırılabilir veya dikkatli bir şekilde yönetilmelidir</span><span class="s1">)</span><span class="s2">.</span>
        <span class="s0">- </span><span class="s1">**</span><span class="s2">target/</span><span class="s1">*</span><span class="s2">.war</span><span class="s1">:**</span><span class="s2"> Kopyalanacak WAR dosyasının konumu.</span>
        <span class="s0">- </span><span class="s1">**$</span><span class="s2">{TOMCAT_SERVER_USER}@</span><span class="s1">$</span><span class="s2">{TOMCAT_SERVER}</span><span class="s1">:$</span><span class="s2">{TOMCAT_PATH}</span><span class="s1">:**</span><span class="s2"> Dosyanın kopyalanacağı hedef sunucu ve dizin.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">ssh -o StrictHostKeyChecking=no </span><span class="s1">$</span><span class="s2">{TOMCAT_SERVER_USER}@</span><span class="s1">$</span><span class="s2">{TOMCAT_SERVER} </span><span class="s1">&quot;</span><span class="s2">sudo sh </span><span class="s1">$</span><span class="s2">{TOMCAT_SHUTDOWN_SCRIPT}</span><span class="s1">&quot;:**</span><span class="s2"> Tomcat'i durdurur.</span>
    <span class="s0">- </span><span class="s1">**</span><span class="s2">ssh -o StrictHostKeyChecking=no </span><span class="s1">$</span><span class="s2">{TOMCAT_SERVER_USER}@</span><span class="s1">$</span><span class="s2">{TOMCAT_SERVER} </span><span class="s1">&quot;</span><span class="s2">sudo sh </span><span class="s1">$</span><span class="s2">{TOMCAT_STARTUP_SCRIPT}</span><span class="s1">&quot;:**</span><span class="s2"> Tomcat'i başlatır.</span>
<span class="s0">6. </span><span class="s1">**</span><span class="s2">Publish to Nexus</span><span class="s1">:**</span><span class="s2"> </span><span class="s1">(</span><span class="s2">Opsiyonel</span><span class="s1">) </span><span class="s2">Üretilen artifact'ı </span><span class="s1">(</span><span class="s2">WAR dosyası</span><span class="s1">) </span><span class="s2">Nexus'e yükler. Bu aşama, artifact'ların merkezi bir depoda saklanmasını ve paylaşılmasını sağlar.</span>

<span class="s1">**</span><span class="s2">Jenkins Configuration as Code </span><span class="s1">(</span><span class="s2">JCasc</span><span class="s1">)**</span>

<span class="s2">Jenkins Configuration as Code </span><span class="s1">(</span><span class="s2">JCasc</span><span class="s1">)</span><span class="s2">, Jenkins ayarlarını kod olarak yönetmenizi sağlayan bir yaklaşımdır. Bu yaklaşım, Jenkins ayarlarını YAML formatında dosyalarda saklamanıza ve versiyon kontrol sisteminde  tutmanıza olanak tanır.</span>

<span class="s2">JCasc ile Jenkins ortamınızı kolayca yeniden oluşturabilir veya farklı ortamlara dağıtabilirsiniz.Jenkins ayarlarını otomatik olarak uygulayabilir ve yönetebilirsiniz.</span>

<span class="s2">Bu özelliği kullanabilmek için Jenkins'te </span><span class="s1">&quot;</span><span class="s2">Configuration as Code</span><span class="s1">&quot; </span><span class="s2">plugin'ini kurun.</span>

<span class="s1">![</span><span class="s2">image</span><span class="s1">](</span><span class="s2">/image/dokuman4_ss/conf-as-code.png</span><span class="s1">)</span>

<span class="s1">**</span><span class="s2">Seed Jobs ve Job DSL</span><span class="s1">**</span>

<span class="s2">Seed Jobs ve Job DSL </span><span class="s1">(</span><span class="s2">Domain-Specific Language</span><span class="s1">)</span><span class="s2">, Jenkins'te job’ları otomatik olarak oluşturmanızı sağlayan bir yaklaşımdır. Bu yaklaşım, büyük sayıda benzer işi yönetmek ve yapılandırmayı otomatikleştirmek için idealdir.</span>

<span class="s1">**</span><span class="s2">Ek Notlar</span><span class="s1">:**</span>

<span class="s0">- </span><span class="s2">JCasc ve Job DSL, Jenkins'i daha ölçeklenebilir, yönetilebilir ve sürdürülebilir hale getirmek için kullanabileceğiniz güçlü araçlardır.</span>
<span class="s0">- </span><span class="s2">Bu konular, bu dokümanın kapsamı dışındadır. Ancak, daha fazla bilgi edinmek için aşağıdaki kaynaklara başvurabilirsiniz.</span>
<span class="s0">- </span><span class="s1">****</span><span class="s5">https://www.jenkins.io/projects/jcasc/</span>
<span class="s0">- </span><span class="s1">[**</span><span class="s5">https://www.jenkins.io/doc/pipeline/steps/job-dsl/</span><span class="s1">**](</span><span class="s5">https://www.google.com/url?sa=E&amp;q=https%3A%2F%2Fwww.jenkins.io%2Fdoc%2Fpipeline%2Fsteps%2Fjob-dsl%2F</span><span class="s1">)</span></pre>
</body>
</html>